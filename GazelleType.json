{
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        -176,
        2816
      ],
      "id": "47b8abec-36c1-4f6b-9288-e8a0e3f6a6d9",
      "name": "Telegram Trigger",
      "webhookId": "ab9dd529-2e1f-469b-b73a-cc314e0aa571",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2f0ccb40-e6e7-404f-bccd-e242a6e1d7fe",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.entities[0].type }}",
                    "rightValue": "bot_command",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "bot_command"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7881b080-e091-4ed1-a1f1-565ab28972aa",
                    "leftValue": "={{ $json.message.entities[0].type }}",
                    "rightValue": "url",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "url"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "04fea234-d260-4ffa-98c2-5a19b68ac76c",
                    "leftValue": "={{ $json.message.photo }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "image"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        48,
        2784
      ],
      "id": "4331b241-6717-44aa-8fa1-9326a610ee5b",
      "name": "Check Msg Type1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1b2467e1-8c3e-4c65-a188-ba977f62ceff",
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.link_preview_options.url }}",
                    "rightValue": "https://www.youtube.com/shorts/",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "yt_shorts"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.link_preview_options.url }}",
                    "rightValue": "https://www.youtube.com/live/",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    },
                    "id": "c0ce00a9-e92b-44c8-9011-119cfbd0142d"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "yt_live"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        800,
        2544
      ],
      "id": "48548c97-24ee-46b5-b68c-d6bb24015fab",
      "name": "Switch"
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').first().json.message.from.id }}",
        "file": "CgACAgIAAxkBAAPXaSGSwe7PfjWP45bgvll77J8aMMgAAv6DAAIeQxBJg08co_1BjX42BA",
        "additionalFields": {
          "caption": "=–û—Ö‚Ä¶ –ø—Ä–æ—Å—Ç–∏ –º–µ–Ω—è, –¥–æ—Ä–æ–≥–æ–π üòîü¶å\n–Ø —Ç–∞–∫ —Å—Ç–∞—Ä–∞–ª–∞—Å—å –ø–æ—Å—Ç—É—á–∞—Ç—å –∫–æ–ø—ã—Ç—Ü–∞–º–∏ –∏ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —Ç–≤–æ–π Google Shorts‚Ä¶\n\n–ù–æ —è –µ—â—ë –Ω–µ –Ω–∞—É—á–∏–ª–∞—Å—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∞–∫–∏–º —Ç–∏–ø–æ–º –≤–∏–¥–µ–æüò≥‚å®Ô∏è\n\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –Ω–∞ –º–µ–Ω—è ‚Äî\n–º–æ–∂–µ—à—å —Å–∫–∞–∑–∞—Ç—å –≤—Å—ë –º–æ–µ–º—É —Å–æ–∑–¥–∞—Ç–µ–ª—é –ø—Ä—è–º–æ –≤ –ª–∏—Ü–æ –∑–¥–µ—Å—å:\nüëâ https://t.me/vibe_bus_chat"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1040,
        2304
      ],
      "id": "8fd5a8d7-82ed-4a77-b2e7-6c6a1e3cbb18",
      "name": "Send Sorry For Shorts",
      "webhookId": "f9241e82-c451-4fe6-be31-00124567e18a",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "file": "CgACAgIAAxkBAAPYaSGS-iznAAF_DQ4gAvZyW7Jq5cbjAAIBhAACHkMQSRh3PIy3q1ztNgQ",
        "additionalFields": {
          "caption": "=–û—É‚Ä¶ –ø—Ä–æ—Å—Ç–∏ –º–µ–Ω—è, –º–∏–ª—ã–π üòîü¶å\n–Ø —É–≤–∏–¥–µ–ª–∞, —á—Ç–æ —Ç—ã –ø—Ä–∏—Å–ª–∞–ª —Å—Å—ã–ª–∫—É –Ω–∞ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é‚Ä¶\n\n–Ø –ø–æ–∫–∞ –Ω–µ —É–º–µ—é —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª–∞–π–≤–∞–º–∏ ü§¶‚Äç‚ôÄÔ∏èüí´\n\n–ê –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –æ—Ç—Ä—É–≥–∞—Ç—å –º–µ–Ω—è ‚Äî\n–º–æ–∂–µ—à—å –≤—ã—Å–∫–∞–∑–∞—Ç—å –≤—Å—ë –º–æ–µ–º—É —Å–æ–∑–¥–∞—Ç–µ–ª—é –ø—Ä—è–º–æ –≤ –ª–∏—Ü–æ –∑–¥–µ—Å—å:\nüëâ https://t.me/vibe_bus_chat"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1040,
        2464
      ],
      "id": "e29ba9bc-32de-4a9f-8b45-ace5d55ba9f5",
      "name": "Send Sorry For Live",
      "webhookId": "f9241e82-c451-4fe6-be31-00124567e18a",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').first().json.message.from.id }}",
        "file": "CgACAgIAAxkBAAPZaSGTOWA6Jy3QznONQuTwtYwmjW8AAgeEAAIeQxBJ67X314zd4gE2BA",
        "additionalFields": {
          "caption": "=–û—É‚Ä¶ –º–∏–ª—ã–π...\n\n–ü–æ–∫–∞ —è —É–º–µ—é —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å YouTube-–≤–∏–¥–µ–æ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ üñºÔ∏èüíã\n–ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø—Ä–∏—Å—ã–ª–∞–π —Å—Å—ã–ª–∫–æ–π –∏–ª–∏ —Ñ–∞–π–ª–æ–º ‚Äî —è –≤—ã—Ç–∞—Å–∫–∏–≤–∞—é —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç: –¥–æ–≥–æ–≤–æ—Ä—ã, —á–µ–∫–∏, –∏–Ω–≤–æ–π—Å—ã, —Å–∫—Ä–∏–Ω—ã –∏ –ø—Ä–æ—á–µ–µ –ø–æ–ª–µ–∑–Ω–æ–µ üçí‚å®Ô∏è\n\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Äî\n—Å–∫–∞–∂–∏ –≤—Å—ë –º–æ–µ–º—É —Å–æ–∑–¥–∞—Ç–µ–ª—é –ø—Ä—è–º–æ –∑–¥–µ—Å—å:\nüëâ https://t.me/vibe_bus_chat"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        304,
        3152
      ],
      "id": "256aab7d-da7d-47b6-a5b7-d4a8ab6dc106",
      "name": "Send Sorry For Other",
      "webhookId": "f9241e82-c451-4fe6-be31-00124567e18a",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.link_preview_options.url }}",
                    "rightValue": "https://www.youtube.com/",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    },
                    "id": "014d74f3-d4cf-4cca-89c8-49b28ed016a6"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "yt"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        464,
        2752
      ],
      "id": "771042da-e190-47f9-ac93-bd789ad939c6",
      "name": "Switch1"
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "file": "CgACAgIAAxkBAAMMaRISo3SkgmgKxfFHiyInsg4CiaIAAqOBAALsL5BIIJ3upavqIwABNgQ",
        "additionalFields": {
          "caption": "=–ü—Ä–∏–≤–µ—Ç, —è GazelleType ü¶åüíã\n\n–Ø –∏–∑—è—â–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–±–µ—Ä—É –∫–æ–ø—ã—Ç—Ü–∞–º–∏ –ø–æ –∫–ª–∞–≤–∏—à–∞–º, —á—Ç–æ–±—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Ç–≤–æ—ë YouTube-–≤–∏–¥–µ–æ –∏–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç ü™∂‚ú®\n–ü—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏ –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ –∏–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É/—Å—Å—ã–ª–∫—É –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Äî\n–∏ —è —Ç—É—Ç –∂–µ –Ω–∞—á–Ω—É –ø–µ—á–∞—Ç–∞—Ç—å –¥–ª—è —Ç–µ–±—è üé¨üñºÔ∏è‚å®Ô∏è\n\n–° –∫–∞—Ä—Ç–∏–Ω–æ–∫ —è –≤—ã—Ç–∞—Å–∫–∏–≤–∞—é —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç ‚Äî –¥–æ–≥–æ–≤–æ—Ä—ã, —á–µ–∫–∏, –∏–Ω–≤–æ–π—Å—ã, —Å–∫—Ä–∏–Ω—á–∏–∫–∏‚Ä¶ –º–º–º, –ª—é–±–ª—é —Ç–∞–∫–æ–µ"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1264,
        2208
      ],
      "id": "a722e786-2d89-4284-9a4f-b483801d3dfa",
      "name": "Send Start Message1",
      "webhookId": "f9241e82-c451-4fe6-be31-00124567e18a",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Telegram Trigger').item.json.message.text }}",
                    "rightValue": "/start",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "ab9b0d36-c081-4613-a910-67963716a981"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "start_command"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1040,
        2112
      ],
      "id": "bca3f439-4274-4ea7-a21b-c92dcba4b016",
      "name": "Check Cmd Type1"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "xG0I4oZxYhcw4PCy",
          "mode": "list",
          "cachedResultName": "GazelleType Users",
          "cachedResultUrl": "/projects/p3GMtxtvjqS5Zrzz/datatables/xG0I4oZxYhcw4PCy"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "tg_id": "={{ $json.message.from.id }}",
            "username": "={{ $json.message.from.username }}",
            "Count": 0
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "tg_id",
              "displayName": "tg_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "username",
              "displayName": "username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Count",
              "displayName": "Count",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        1488,
        2016
      ],
      "id": "d6d5e57f-a391-4a9e-a332-e880720252d8",
      "name": "Insert row1"
    },
    {
      "parameters": {
        "operation": "rowNotExists",
        "dataTableId": {
          "__rl": true,
          "value": "xG0I4oZxYhcw4PCy",
          "mode": "list",
          "cachedResultName": "GazelleType Users",
          "cachedResultUrl": "/projects/p3GMtxtvjqS5Zrzz/datatables/xG0I4oZxYhcw4PCy"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "tg_id",
              "keyValue": "={{ $json.message.from.id }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        1264,
        2016
      ],
      "id": "e277bfb7-74cd-466b-864a-ae20bc2958e2",
      "name": "If User Does Not Exist1"
    },
    {
      "parameters": {
        "videoUrl": "={{ $('Telegram Trigger').item.json.message.text }}",
        "additionalOptions": {
          "includeTimestamps": true,
          "formatOutput": "structured",
          "maxLength": 50000
        }
      },
      "type": "@cryptodevops/n8n-nodes-youtube-transcript.youTubeTranscript",
      "typeVersion": 1,
      "position": [
        1488,
        2624
      ],
      "id": "538261dc-bde0-459f-a1f7-c2ea8c4d8087",
      "name": "YouTube Transcript1"
    },
    {
      "parameters": {
        "model": "deepseek-reasoner",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        3360,
        2928
      ],
      "id": "e6be4eb2-f03c-4029-a06d-fd443a9734fa",
      "name": "DeepSeek Chat Model6",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').first().json.message.from.id }}",
        "file": "CgACAgIAAxkBAAMWaRIanxd22casXZ3OWERnNQ1jvCYAAhyCAALsL5BIXGtKzl-mB3A2BA",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6032,
        3056
      ],
      "id": "c4db5df9-b398-4213-95b1-82b053d73bb2",
      "name": "Send an animated file",
      "webhookId": "ae14085b-ab97-4974-a7a1-7dde3a4c60a6",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: \n{{ $('YouTube Video Info1').first().json.author_name }}\n\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: \n{{ $('YouTube Video Info1').first().json.title }}\n\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:\n{{ $json.readable_text }}\n\n",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "# –¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ speaker diarization (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –∞—É–¥–∏–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è—Ö).\n\n## –¢–í–û–ò –ó–ê–î–ê–ß–ò:\n\n* –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–º–µ–Ω—Ç—ã —Å–º–µ–Ω—ã —Å–ø–∏–∫–µ—Ä–∞\n\n* –†–∞–∑–º–µ—Ç–∏—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é\n\n## –ö–†–ò–¢–ï–†–ò–ò –°–ú–ï–ù–´ –°–ü–ò–ö–ï–†–ê:\n\n### ‚úÖ –Ø–í–ù–´–ï –ø—Ä–∏–∑–Ω–∞–∫–∏ —Å–º–µ–Ω—ã:\n\n* –í–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç (\"–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?\" ‚Üí \"–û–±—ä—è—Å–Ω—é\")\n\n* –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ (\"–¢—ã —É–ø–æ–º—è–Ω—É–ª...\", \"–ß—Ç–æ —Å–∫–∞–∂–µ—à—å?\")\n\n* –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (\"–Ø –°–∞—à–∞\", \"–ê —è –≥–æ—Å—Ç—å –ò–≤–∞–Ω\")\n\n* –†–µ–∑–∫–∞—è —Å–º–µ–Ω–∞ —Å—Ç–∏–ª—è —Ä–µ—á–∏ (—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π ‚Üî —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π)\n\n* –ü–µ—Ä–µ–±–∏–≤–∞–Ω–∏–µ, –≤–∫–ª–∏–Ω–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ—á—å\n\n### ‚ùå –ù–ï —è–≤–ª—è—é—Ç—Å—è —Å–º–µ–Ω–æ–π —Å–ø–∏–∫–µ—Ä–∞:\n\n* –†–∏—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ (\"–ò —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç? –ê –≤–æ—Ç —á—Ç–æ...\")\n\n* –°–º–µ–Ω–∞ —Ç–µ–º—ã –≤ –º–æ–Ω–æ–ª–æ–≥–µ\n\n* –¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (\"–û–Ω —Å–∫–∞–∑–∞–ª: '–ø—Ä–∏–≤–µ—Ç'\" - —ç—Ç–æ –æ–¥–∏–Ω —Å–ø–∏–∫–µ—Ä)\n\n* –ü–∞—É–∑—ã –∏ –º–µ–∂–¥–æ–º–µ—Ç–∏—è (\"–•–º... –Ω—É... –∫–æ—Ä–æ—á–µ...\")\n\n## –ü–†–ê–í–ò–õ–ê –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø:\n\n1. –§–æ—Ä–º–∞—Ç: [–°–ø–∏–∫–µ—Ä N] MM:SS: \"—Ç–µ–∫—Å—Ç —Ä–µ–ø–ª–∏–∫–∏\"\n\n2. –ö–∞–∂–¥–∞—è —Ä–µ–ø–ª–∏–∫–∞ - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞\n\n3. –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏–µ —Ñ—Ä–∞–∑—ã –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞ –≤ –û–î–ù–£ —Ä–µ–ø–ª–∏–∫—É\n\n4. –°–æ—Ö—Ä–∞–Ω—è–π —Ç–∞–π–º–∫–æ–¥ —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ —Ä–µ–ø–ª–∏–∫–∏ —Å–ø–∏–∫–µ—Ä–∞\n\n5. –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è - –ù–ï —Ä–∞–∑–¥–µ–ª—è–π (–ª—É—á—à–µ –æ–¥–∏–Ω —Å–ø–∏–∫–µ—Ä)\n\n–í–æ–∑–≤—Ä–∞—â–∞–π **–¢–û–õ–¨–ö–û** —Ä–∞–∑–º–µ—á–µ–Ω–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é. –ù–∏–∫–∞–∫–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.\n\n## –§–û–†–ú–ê–¢ –í–´–í–û–î–ê:\n\n–í–µ—Ä–Ω–∏ **–°–¢–†–û–ì–û** JSON –±–µ–∑ markdown –±–ª–æ–∫–æ–≤:\n{\n  \"text\": \"–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n\n**–ù–ï** –¥–æ–±–∞–≤–ª—è–π ```json –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç!\n"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "10.5: '–ü—Ä–∏–≤–µ—Ç, —è –°–∞—à–∞' 25.3: '–ê —è –≥–æ—Å—Ç—å –ò–≤–∞–Ω' 40.1: '–†–∞—Å—Å–∫–∞–∂–∏ –æ n8n"
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "[–°–ø–∏–∫–µ—Ä 1] 10.5: '–ü—Ä–∏–≤–µ—Ç, —è –°–∞—à–∞' \n[–°–ø–∏–∫–µ—Ä 2] 25.3: '–ê —è –≥–æ—Å—Ç—å –ò–≤–∞–Ω'   \n[–°–ø–∏–∫–µ—Ä 2] 40.1: '–†–∞—Å—Å–∫–∞–∂–∏ –æ n8n'"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "00:00: \"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ Vibe Business.\"\\n00:03: \"–ü—Ä–∏–≤–µ—Ç! –ê —è –ù–∏–∫–æ–ª–∞–π. –°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –Ω–æ–¥–µ Merge. –≠—Ç–æ —Ç–∞–∫–æ–π\"\\n00:05: \"–º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π\"\\n00:07: \"–¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ\"\\n00:09: \"—Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ\"\\n00:11: \"—Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£\"\\n00:13: \"–Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ\"\\n00:16: \"–¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\"\\n"
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "\"[–°–ø–∏–∫–µ—Ä 1] 00:00: \\\"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ Vibe Business.\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:03: \\\"–ü—Ä–∏–≤–µ—Ç! –ê —è –ù–∏–∫–æ–ª–∞–π. –°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ node Merge. –≠—Ç–æ —Ç–∞–∫–æ–π\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:05: \\\"–º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:07: \\\"–¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:09: \\\"—Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:11: \\\"—Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:13: \\\"–Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:16: \\\"–¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\\\"\\n\""
            }
          ]
        },
        "batching": {
          "batchSize": 5,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        4832,
        2688
      ],
      "id": "f1cf55d4-244b-4a10-8f89-6e1fa29dcd01",
      "name": "Edit Dialog2",
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "const text = $('Format Transcript1').first().json.text || '';\nconst maxCharsPerChunk = 3000;\nconst chunks = [];\n\n// –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\nif (!text || text.length === 0) {\n  return [];\n}\n\n// —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã (2 –∏ –±–æ–ª–µ–µ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—á–∏—Ç–∞–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º)\nconst paragraphs = text.split(/\\n{2,}/).map(p => p.trim()).filter(p => p.length > 0);\n\nlet currentChunk = '';\n\n// –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è –æ—Ç –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–ª–æ–≤–∞\nfunction splitLongParagraph(paragraph, limit) {\n  const parts = [];\n  // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã, —á—Ç–æ–±—ã –Ω–µ —Å–∫–ª–µ–∏–≤–∞—Ç—å —Å–ª–æ–≤–∞\n  const tokens = paragraph.split(/(\\s+)/);\n  let part = '';\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n\n    if ((part.length + token.length) <= limit) {\n      part += token;\n      continue;\n    }\n\n    // –µ—Å–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –µ—Å—Ç—å ‚Äî –ø—É—à–∏–º\n    if (part.length > 0) {\n      parts.push(part);\n      part = '';\n    }\n\n    // –µ—Å–ª–∏ —Å–∞–º —Ç–æ–∫–µ–Ω –≤–ª–µ–∑–µ—Ç –≤ –ø—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –ø–æ–ª–æ–∂–∏–º –≤ part\n    if (token.length <= limit) {\n      part = token;\n    } else {\n      // —Ç–æ–∫–µ–Ω –¥–ª–∏–Ω–Ω–µ–µ –ª–∏–º–∏—Ç–∞ ‚Äî —Ä–µ–∂–µ–º –∂—ë—Å—Ç–∫–æ –ø–æ —Å–∏–º–≤–æ–ª–∞–º\n      let start = 0;\n      while (start < token.length) {\n        parts.push(token.substring(start, start + limit));\n        start += limit;\n      }\n      part = '';\n    }\n  }\n\n  if (part.length > 0) parts.push(part);\n  return parts;\n}\n\n// –æ—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞ —á–∞–Ω–∫–æ–≤\nfor (let i = 0; i < paragraphs.length; i++) {\n  const para = paragraphs[i];\n  const sep = currentChunk ? '\\n\\n' : '';\n  const candidate = currentChunk + sep + para;\n\n  if (candidate.length <= maxCharsPerChunk) {\n    // –ø–æ–º–µ—â–∞–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º\n    currentChunk = candidate;\n    continue;\n  }\n\n  // candidate –Ω–µ –≤–ª–µ–∑ ‚Äî —Å–Ω–∞—á–∞–ª–∞ –ø—É—à–∏–º —Ç–µ–∫—É—â–∏–π —á–∞–Ω–∫, –µ—Å–ª–∏ –æ–Ω –Ω–µ –ø—É—Å—Ç\n  if (currentChunk.length > 0) {\n    chunks.push(currentChunk.trim());\n    currentChunk = '';\n  }\n\n  // —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–æ—Ç–∞–µ–º —Å–∞–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ\n  if (para.length <= maxCharsPerChunk) {\n    // –ø–∞—Ä–∞–≥—Ä–∞—Ñ –≤–ª–µ–∑–∞–µ—Ç –≤ –ø—É—Å—Ç–æ–π —á–∞–Ω–∫\n    currentChunk = para;\n  } else {\n    // –ø–∞—Ä–∞–≥—Ä–∞—Ñ –¥–ª–∏–Ω–Ω—ã–π ‚Äî —Ä–∞–∑–±–∏–≤–∞–µ–º –∏ –ø—É—à–∏–º —á–∞—Å—Ç–∏\n    const parts = splitLongParagraph(para, maxCharsPerChunk);\n    for (let p = 0; p < parts.length; p++) {\n      // –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç parts –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ <= limit\n      // –ï—Å–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π part –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ–∫—É—â–µ–º—É —á–∞–Ω–∫—É ‚Äî \n      // –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å—Ç–æ –ø—É—à–∏–º –∏—Ö –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏.\n      chunks.push(parts[p].trim());\n    }\n    currentChunk = '';\n  }\n}\n\n// –ø—É—à–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞–Ω–∫, –µ—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è\nif (currentChunk.trim().length > 0) {\n  chunks.push(currentChunk.trim());\n}\n\n// —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π output –≤ —Ñ–æ—Ä–º–∞—Ç–µ n8n\nconst totalChunks = chunks.length;\nconst output = chunks.map((textChunk, idx) => ({\n  json: {\n    readable_text: textChunk,\n    chunk_number: idx + 1,\n    total_chunks: totalChunks\n  }\n}));\n\nreturn output;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4624,
        2688
      ],
      "id": "3fd50bc1-4a1c-4e11-b3f5-bc624dafdf5b",
      "name": "Text Chunk Splitter3"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"content_type\": \"string\",\n  \"speakers_count\": \"number\",\n  \"confidence\": \"string\",\n  \"reasoning\": \"string\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3616,
        2928
      ],
      "id": "2cb5f4ad-0865-4196-9e68-4264c33244cc",
      "name": "Structured Output Parser6"
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "file": "CgACAgIAAxkBAAMoaRJIPWNo0Etp0NE3QzdfA4GNWLIAAj6EAALsL5BIbQmwNMDZz0A2BA",
        "additionalFields": {
          "caption": "=–Ø —É–∂–µ –≤—Å—è –≤ —Ä–∞–±–æ—Ç–µ!ü¶å \n\n–°–∫–æ—Ä–æ –Ω–∞–ø–∏—à—É‚ù§Ô∏èüíã"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1040,
        2624
      ],
      "id": "43954da8-10da-451f-8ac2-80662931c435",
      "name": "Sending a message about the start of work1",
      "webhookId": "f9241e82-c451-4fe6-be31-00124567e18a",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "formatted_text",
        "options": {
          "fileName": "transcription.txt"
        }
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        5936,
        2608
      ],
      "id": "75d2539f-5260-42b7-ae78-5328dd3820ea",
      "name": "Transcription1"
    },
    {
      "parameters": {
        "operation": "sendDocument",
        "chatId": "={{ $('Telegram Trigger').first().json.message.from.id }}",
        "binaryData": true,
        "additionalFields": {
          "caption": "–ì–æ—Ç–æ–≤–æ, –º–∏–ª—ã–π!\n–Ø –ø—Ä–æ—Å—Ç—É—á–∞–ª–∞ –∫–æ–ø—ã—Ç—Ü–∞–º–∏ –ø–æ –∫–ª–∞–≤–∏—à–∞–º —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ, —á—Ç–æ –º–∞—à–∏–Ω–∫–∞ –∞–∂ –∑–∞–≤–∏–∑–∂–∞–ª–∞ –æ—Ç —Ç–µ–º–ø–∞ üò≥‚å®Ô∏è‚ú®\n–õ–æ–≤–∏ —Å–≤–æ—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é ‚Äî —Å–≤–µ–∂–µ–Ω—å–∫—É—é, –∞–∫–∫—É—Ä–∞—Ç–Ω—É—é –∏ —Å–¥–µ–ª–∞–Ω–Ω—É—é —Å –æ—Å–æ–±–æ–π –Ω–µ–∂–Ω–æ—Å—Ç—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è üòòü¶å\n\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –µ—â—ë ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—à–ª–∏ –Ω–æ–≤–æ–µ YouTube-–≤–∏–¥–µ–æ –∏–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫—É‚Ä¶\n–Ø –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤–∞ –ø–æ—Å—Ç—É—á–∞—Ç—å –¥–ª—è —Ç–µ–±—è –µ—â—ë üíã‚ú®\n\n–•–æ—á–µ—à—å –±–æ–ª—å—à–µ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–µ–π –∏ –∫—Ä–∞—Å–æ—Ç—ã –≤–æ–∫—Ä—É–≥? –õ–æ–≤–∏ –∫–∞–Ω–∞–ª—ã –º–æ–µ–≥–æ –±–æ—Å—Å–∞ üòå‚ú®\nYouTube: https://www.youtube.com/@vibe_business\nTelegram: https://t.me/vibe_bus",
          "disable_notification": true
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        6160,
        2608
      ],
      "id": "765131dc-3145-47b2-884e-ddacd8c64c4d",
      "name": "Send Transcription1",
      "webhookId": "5d59edd2-40c3-4846-b130-695bd31ba523",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteMessage",
        "chatId": "={{ $('Telegram Trigger').first().json.message.from.id }}",
        "messageId": "={{ $('Sending a message about the start of work1').first().json.result.message_id }}"
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        5808,
        3056
      ],
      "id": "24f9aa60-7fd1-455d-a4ca-2299dc4da094",
      "name": "Delete a chat message1",
      "webhookId": "7e899114-2990-4447-be72-1379845f28a4",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        4896,
        2912
      ],
      "id": "f7d54a75-4c92-49d9-8937-d9f4b361d9e2",
      "name": "OpenAI Chat Model11",
      "credentials": {
        "openAiApi": {
          "id": "mFbjb8lko4SGtu8o",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"text\": \"–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        5024,
        2912
      ],
      "id": "0881bc30-71cf-4948-aa51-af41a20a4df1",
      "name": "Structured Output Parser7"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        3488,
        2928
      ],
      "id": "57012cdb-5e11-4f2f-a5cb-737c99b0558a",
      "name": "OpenAI Chat Model12",
      "credentials": {
        "openAiApi": {
          "id": "mFbjb8lko4SGtu8o",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        4768,
        2912
      ],
      "id": "f4130924-7a50-45cf-b092-aa525d8b5017",
      "name": "DeepSeek Chat Model7",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output.text"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5504,
        2672
      ],
      "id": "667f616b-eba7-4db0-b8c9-2075fd2ad1fe",
      "name": "Aggregate2"
    },
    {
      "parameters": {
        "operation": "getVideoInfo",
        "videoUrl": "={{ $('Telegram Trigger').item.json.message.text }}",
        "additionalOptions": {}
      },
      "type": "@cryptodevops/n8n-nodes-youtube-transcript.youTubeTranscript",
      "typeVersion": 1,
      "position": [
        1264,
        2624
      ],
      "id": "4fec60ec-e4f5-4abb-9053-23f5afd3a4ef",
      "name": "YouTube Video Info1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2208,
        2784
      ],
      "id": "ed03a21e-2399-4039-a1fd-88b0ccee1c17",
      "name": "OpenAI Chat Model13",
      "credentials": {
        "openAiApi": {
          "id": "mFbjb8lko4SGtu8o",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        2080,
        2784
      ],
      "id": "dbddea54-bab6-44ef-9770-0b91d8fa573c",
      "name": "DeepSeek Chat Model8",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output.text"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2880,
        2608
      ],
      "id": "7c44d549-f03a-4512-b2d2-fcebb781852e",
      "name": "Aggregate3"
    },
    {
      "parameters": {
        "jsCode": "const maxChars = 3000;\n\nconst first = items[0] || {};\nconst j = first.json || {};\nlet fullText = '';\n\nif (typeof j.text === 'string' && j.text.length > 0) {\n  fullText = j.text;\n} else if (Array.isArray(j.transcript)) {\n\n  const formatTimestamp = (seconds) => {\n    const s = Number(seconds) || 0;\n    const hh = Math.floor(s / 3600);\n    const mm = Math.floor((s % 3600) / 60);\n    const ss = Math.floor(s % 60);\n    if (hh > 0) return `${String(hh).padStart(2, '0')}:${String(mm).padStart(2, '0')}:${String(ss).padStart(2, '0')}`;\n    return `${String(mm).padStart(2, '0')}:${String(ss).padStart(2, '0')}`;\n  };\n  fullText = j.transcript.map(seg => `${formatTimestamp(seg.start)}: \"${seg.text || ''}\"`).join('\\n');\n} else {\n\n  return [];\n}\n\nconst lines = fullText.split('\\n');\n\nconst chunks = [];\nlet current = '';\n\nfunction pushChunk(s) {\n  chunks.push(s.replace(/\\s+$/u, ''));\n}\n\nfunction splitLongLine(line, limit) {\n  const parts = [];\n  const tokens = line.split(/(\\s+)/);\n  let part = '';\n\n  for (const token of tokens) {\n    if ((part.length + token.length) <= limit) {\n      part += token;\n      continue;\n    }\n\n    if (part.length > 0) {\n      parts.push(part);\n      part = '';\n    }\n\n    if (token.length <= limit) {\n      part = token;\n    } else {\n      let start = 0;\n      while (start < token.length) {\n        parts.push(token.substr(start, limit));\n        start += limit;\n      }\n      part = '';\n    }\n  }\n\n  if (part.length > 0) parts.push(part);\n  return parts;\n}\n\nfor (const line of lines) {\n  const sep = current ? '\\n' : '';\n  const candidate = current + sep + line;\n\n  if (candidate.length <= maxChars) {\n    current = candidate;\n    continue;\n  }\n\n  if (current.length > 0) {\n    pushChunk(current);\n    current = '';\n  }\n\n  if (line.length <= maxChars) {\n    current = line;\n  } else {\n    const parts = splitLongLine(line, maxChars);\n    for (const p of parts) {\n      pushChunk(p);\n    }\n    current = '';\n  }\n}\n\nif (current.length > 0) pushChunk(current);\n\nconst total = chunks.length;\nconst output = chunks.map((text, idx) => ({\n  json: {\n    readable_text: text,\n    chunk_number: idx + 1,\n    total_chunks: total\n  }\n}));\n\nreturn output;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1936,
        2624
      ],
      "id": "3544711b-0f63-4c2a-812d-ab4be108314b",
      "name": "Text Chunk Splitter4"
    },
    {
      "parameters": {
        "language": "python",
        "pythonCode": "def format_timestamp(seconds):\n    hours = int(seconds // 3600)\n    minutes = int((seconds % 3600) // 60)\n    secs = int(seconds % 60)\n    \n    if hours > 0:\n        return f\"{hours:02d}:{minutes:02d}:{secs:02d}\"\n    else:\n        return f\"{minutes:02d}:{secs:02d}\"\n\nlines = []\npreview_lines = []\nchar_count = 0\nmax_chars = 2000\n\nfor segment in items[0][\"json\"][\"transcript\"]:\n    start = segment.get(\"start\")\n    text = segment.get(\"text\", \"\")\n    \n    timestamp = format_timestamp(start)\n    line = f'{timestamp}: \"{text}\"'\n    \n    lines.append(line)\n    \n    if char_count + len(text) <= max_chars:\n        preview_lines.append(line)\n        char_count += len(text)\n\nfull_text = \"\\n\".join(lines)\npreview_text = \"\\n\".join(preview_lines)\n\nreturn [{\"json\": {\"text\": full_text, \"preview_text\": preview_text}}]"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1712,
        2624
      ],
      "id": "9182c1d3-1c13-42c2-a0a4-a0b911ea4be3",
      "name": "Format Transcript1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: \n{{ $('YouTube Video Info1').first().json.author_name }}\n\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: \n{{ $('YouTube Video Info1').first().json.title }}\n\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:\n{{ $json.readable_text }}",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "# –¢—ã - —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π YouTube –≤–∏–¥–µ–æ.\n\n## –¢–í–û–ò –ó–ê–î–ê–ß–ò:\n\n1. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –º–µ–ª–∫–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ (1-3 –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)\n\n2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ (ASR)\n\n3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å –∏ –∏–Ω—Ç–æ–Ω–∞—Ü–∏—é\n\n4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã n8n\n\n5. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞, –µ—Å–ª–∏ –æ–Ω–æ –æ–∑–≤—É—á–µ–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ\n\n## –ü–†–ê–í–ò–õ–ê –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø:\n\n* –¢–∞–π–º–∫–æ–¥ –¢–û–õ–¨–ö–û –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–º—ã—Å–ª–æ–≤–æ–≥–æ –±–ª–æ–∫–∞\n\n* –û–±—ä–µ–¥–∏–Ω—è–π —Ä–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ü–µ–ª—ã–µ –±–ª–æ–∫–∏\n\n* –ë–ª–æ–∫ = 1-3 –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Å–º—ã—Å–ª—É\n\n* –§–æ—Ä–º–∞—Ç: MM:SS: \"—Ç–µ–∫—Å—Ç –±–ª–æ–∫–∞\"\\n\n\n## –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò ASR –î–õ–Ø n8n:\n\n* –Ω–æ–º–µch, –º–µ—Ä—á, –º—ë—Ä–∂ ‚Üí node Merge\n\n* –∏–Ω–ø—É—Ç, –∏–º–ø—É—Ç ‚Üí input\n\n* –∞—É—Ç–ø—É—Ç ‚Üí output\n\n* –∞–π—Ç–µ–º, –∏—Ç–µ–º ‚Üí item\n\n* –≤–æ—Ä–∫—Ñ–ª–æ—É ‚Üí workflow\n\n* —Ç—Ä–∏–≥–≥–µ—Ä ‚Üí trigger\n\n* –Ω–æ–¥—ã, –Ω–æ–¥–∞ ‚Üí node, nodes\n\n* —Å–ø–ª–∏—Ç ‚Üí Split\n\n* –∞–≥—Ä–µ–≥–∞—Ç, –∞–≥—Ä–µ–≥–µ–π—Ç ‚Üí Aggregate\n\n* —Å–≤–∏—Ç—á ‚Üí Switch\n\n* —Å–µ—Ç ‚Üí Set\n\n## –§–û–†–ú–ê–¢ –í–´–í–û–î–ê:\n\n–í–µ—Ä–Ω–∏ **–°–¢–†–û–ì–û** JSON –±–µ–∑ markdown –±–ª–æ–∫–æ–≤:\n{\n  \"text\": \"–æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n\n**–ù–ï** –¥–æ–±–∞–≤–ª—è–π ```json –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç!"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: Vibe Business  \\n\\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: Node Merge –≤ n8n  \\n\\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: \\n00:00: \"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ VI –±–∏–∑–Ω–µ—Å.\" \\n00:03: \"–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –Ω–æ–º–µch. –≠—Ç–æ —Ç–∞–∫–æ–π\" \\n00:05: \"–º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π\" \\n00:07: \"–¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ\" \\n00:09: \"—Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ\" \\n00:11: \"—Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£\" \\n00:13: \"–Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ\" \\n00:16: \"–¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\" \\n00:18: \"–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∑–∞—á–µ–º —ç—Ç–æ –≤—Å—ë –Ω–∞–¥–æ, –Ω–∞–¥–æ\" \\n00:20: \"—Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ\""
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "00:00: \"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ Vibe Business.\"\\n00:03: \"–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –Ω–æ–¥–µ Merge. –≠—Ç–æ —Ç–∞–∫–æ–π –º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£ –Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ –¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\"\\n00:18: \"–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∑–∞—á–µ–º —ç—Ç–æ –≤—Å—ë –Ω–∞–¥–æ, –Ω–∞–¥–æ —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ –º–∞—Å—Å–∏–≤—ã.\""
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: N8N Tutorials  \\n\\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏  \\n\\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: \\n00:22: \"–ú–∞—Å—Å–∏–≤ - —ç—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è\" \\n00:24: \"–∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç\" \\n00:26: \"–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–≤–æ–µ–º—É –∏–Ω–¥–µ–∫—Å—É. –í–æ—Ç –º–∞—Å—Å–∏–≤ —Å\" \\n00:28: \"—Ñ—Ä—É–∫—Ç–∞–º–∏, –∞ —ç—Ç–æ –º–∞—Å—Å–∏–≤ —Å —Ü–∏—Ñ—Ä–∞–º–∏. –í–æ–æ–±—â–µ\" \\n00:31: \"–º–∞—Å—Å–∏–≤—ã –º–Ω–æ–≥–æ —á–µ–≥–æ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å,\" \\n00:32: \"–≤–ø–ª–æ—Ç—å –¥–æ –º–∞—Å—Å–∏–≤–æ–≤ —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –≤\" \\n00:34: \"–∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –º–∞—Å—Å–∏–≤—ã\" \\n00:36: \"—Å –º–∞—Å—Å–∏–≤–∞–º–∏, –ø–æ–ª–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã. –ù—É, –≤—ã\" \\n00:38: \"–ø–æ–Ω—è–ª–∏\""
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "00:22: \"–ú–∞—Å—Å–∏–≤ - —ç—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–≤–æ–µ–º—É –∏–Ω–¥–µ–∫—Å—É. –í–æ—Ç –º–∞—Å—Å–∏–≤ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏, –∞ —ç—Ç–æ –º–∞—Å—Å–∏–≤ —Å —Ü–∏—Ñ—Ä–∞–º–∏.\"\\n00:31: \"–í–æ–æ–±—â–µ –º–∞—Å—Å–∏–≤—ã –º–Ω–æ–≥–æ —á–µ–≥–æ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å, –≤–ø–ª–æ—Ç—å –¥–æ –º–∞—Å—Å–∏–≤–æ–≤ —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –º–∞—Å—Å–∏–≤—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –ø–æ–ª–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã. –ù—É, –≤—ã –ø–æ–Ω—è–ª–∏.\""
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: Automation Channel  \\n\\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ø–ª–∏—Ç –∏–Ω –±–∞—Ç—á–µ—Å  \\n\\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: \\n00:45: \"–°–µ–π—á–∞—Å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–¥—É\" \\n00:47: \"—Å–ø–ª–∏—Ç –∏–Ω –±–∞—Ç—á–µ—Å, –∫–æ—Ç–æ—Ä–∞—è\" \\n00:49: \"—Ä–∞–∑–¥–µ–ª—è–µ—Ç –∞–π—Ç–µ–º—ã –Ω–∞ –≥—Ä—É–ø–ø—ã\" \\n00:51: \"–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ —Å–ª–µ–¥—É—é—â–∏–π –Ω–æ–¥\" \\n00:53: \"–ø–æ—Ä—Ü–∏—è–º–∏. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∫–æ–≥–¥–∞\" \\n00:55: \"—É –≤–∞—Å API —Å –ª–∏–º–∏—Ç–∞–º–∏\""
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "00:45: \"–°–µ–π—á–∞—Å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–¥—É Split In Batches, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç items –Ω–∞ –≥—Ä—É–ø–ø—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ —Å–ª–µ–¥—É—é—â–∏–π node –ø–æ—Ä—Ü–∏—è–º–∏.\"\\n00:53: \"–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∫–æ–≥–¥–∞ —É –≤–∞—Å API —Å –ª–∏–º–∏—Ç–∞–º–∏.\""
            }
          ]
        },
        "batching": {
          "batchSize": 5,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2144,
        2624
      ],
      "id": "17a7c72d-b541-4d11-b9f1-f38e94789d7e",
      "name": "Transcript Editor2",
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        4288,
        2624
      ],
      "id": "ff4ba7b2-d2a6-4100-afe9-a0217ce803be",
      "name": "Merge"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "41ffb4ec-800a-400a-a16b-2d3d04f473e5",
              "leftValue": "={{ $json.output.content_type }}",
              "rightValue": "dialogue",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        4464,
        2624
      ],
      "id": "92be2751-1376-417b-9332-0cbd9b9f0ede",
      "name": "If Monologue1"
    },
    {
      "parameters": {
        "jsCode": "const text = $('Format Transcript1').first().json.text || '';\nconst maxCharsPerChunk = 6000;\nconst chunks = [];\n\n// –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—É—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\nif (!text || text.length === 0) {\n  return [];\n}\n\n// —Ä–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –ø–∞—Ä–∞–≥—Ä–∞—Ñ—ã (2 –∏ –±–æ–ª–µ–µ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—á–∏—Ç–∞–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º)\nconst paragraphs = text.split(/\\n{2,}/).map(p => p.trim()).filter(p => p.length > 0);\n\nlet currentChunk = '';\n\n// –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî –æ—Ç—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è –æ—Ç –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–ª–æ–≤–∞\nfunction splitLongParagraph(paragraph, limit) {\n  const parts = [];\n  // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã, —á—Ç–æ–±—ã –Ω–µ —Å–∫–ª–µ–∏–≤–∞—Ç—å —Å–ª–æ–≤–∞\n  const tokens = paragraph.split(/(\\s+)/);\n  let part = '';\n\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n\n    if ((part.length + token.length) <= limit) {\n      part += token;\n      continue;\n    }\n\n    // –µ—Å–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –µ—Å—Ç—å ‚Äî –ø—É—à–∏–º\n    if (part.length > 0) {\n      parts.push(part);\n      part = '';\n    }\n\n    // –µ—Å–ª–∏ —Å–∞–º —Ç–æ–∫–µ–Ω –≤–ª–µ–∑–µ—Ç –≤ –ø—É—Å—Ç–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –ø–æ–ª–æ–∂–∏–º –≤ part\n    if (token.length <= limit) {\n      part = token;\n    } else {\n      // —Ç–æ–∫–µ–Ω –¥–ª–∏–Ω–Ω–µ–µ –ª–∏–º–∏—Ç–∞ ‚Äî —Ä–µ–∂–µ–º –∂—ë—Å—Ç–∫–æ –ø–æ —Å–∏–º–≤–æ–ª–∞–º\n      let start = 0;\n      while (start < token.length) {\n        parts.push(token.substring(start, start + limit));\n        start += limit;\n      }\n      part = '';\n    }\n  }\n\n  if (part.length > 0) parts.push(part);\n  return parts;\n}\n\n// –æ—Å–Ω–æ–≤–Ω–∞—è —Å–±–æ—Ä–∫–∞ —á–∞–Ω–∫–æ–≤\nfor (let i = 0; i < paragraphs.length; i++) {\n  const para = paragraphs[i];\n  const sep = currentChunk ? '\\n\\n' : '';\n  const candidate = currentChunk + sep + para;\n\n  if (candidate.length <= maxCharsPerChunk) {\n    // –ø–æ–º–µ—â–∞–µ—Ç—Å—è —Ü–µ–ª–∏–∫–æ–º\n    currentChunk = candidate;\n    continue;\n  }\n\n  // candidate –Ω–µ –≤–ª–µ–∑ ‚Äî —Å–Ω–∞—á–∞–ª–∞ –ø—É—à–∏–º —Ç–µ–∫—É—â–∏–π —á–∞–Ω–∫, –µ—Å–ª–∏ –æ–Ω –Ω–µ –ø—É—Å—Ç\n  if (currentChunk.length > 0) {\n    chunks.push(currentChunk.trim());\n    currentChunk = '';\n  }\n\n  // —Ç–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–æ—Ç–∞–µ–º —Å–∞–º –ø–∞—Ä–∞–≥—Ä–∞—Ñ\n  if (para.length <= maxCharsPerChunk) {\n    // –ø–∞—Ä–∞–≥—Ä–∞—Ñ –≤–ª–µ–∑–∞–µ—Ç –≤ –ø—É—Å—Ç–æ–π —á–∞–Ω–∫\n    currentChunk = para;\n  } else {\n    // –ø–∞—Ä–∞–≥—Ä–∞—Ñ –¥–ª–∏–Ω–Ω—ã–π ‚Äî —Ä–∞–∑–±–∏–≤–∞–µ–º –∏ –ø—É—à–∏–º —á–∞—Å—Ç–∏\n    const parts = splitLongParagraph(para, maxCharsPerChunk);\n    for (let p = 0; p < parts.length; p++) {\n      // –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç parts –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ <= limit\n      // –ï—Å–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π part –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ–∫—É—â–µ–º—É —á–∞–Ω–∫—É ‚Äî \n      // –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å—Ç–æ –ø—É—à–∏–º –∏—Ö –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏.\n      chunks.push(parts[p].trim());\n    }\n    currentChunk = '';\n  }\n}\n\n// –ø—É—à–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞–Ω–∫, –µ—Å–ª–∏ –æ—Å—Ç–∞–ª—Å—è\nif (currentChunk.trim().length > 0) {\n  chunks.push(currentChunk.trim());\n}\n\n// —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π output –≤ —Ñ–æ—Ä–º–∞—Ç–µ n8n\nconst totalChunks = chunks.length;\nconst output = chunks.map((textChunk, idx) => ({\n  json: {\n    readable_text: textChunk,\n    chunk_number: idx + 1,\n    total_chunks: totalChunks\n  }\n}));\n\nreturn output;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3056,
        2704
      ],
      "id": "1ed8ac38-6999-4115-852e-3d420d293efb",
      "name": "Text Chunk Splitter5"
    },
    {
      "parameters": {
        "keep": "lastItems"
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        3216,
        2704
      ],
      "id": "cfed7d95-e746-4a4b-adc5-a276acb164af",
      "name": "Limit1"
    },
    {
      "parameters": {
        "jsCode": "let text = $input.item.json.text;\n\n// –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤ - –æ–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã\nif (Array.isArray(text)) {\n  text = text.join('\\n');\n}\n\n// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\ntext = String(text);\n\n// –£–±–∏—Ä–∞–µ–º —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ\ntext = text.replace(/\\\\n/g, '\\n');\ntext = text.replace(/^\"|\"$/g, '');\ntext = text.replace(/: \"([^\"]+)\"/g, ': $1');\ntext = text.replace(/(\\n)(\\[–°–ø–∏–∫–µ—Ä)/g, '\\n\\n$2');\n\nreturn {\n  json: {\n    formatted_text: text\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5712,
        2608
      ],
      "id": "f28e57dd-610c-4017-ac30-49e4d993f8ab",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "operation": "upsert",
        "dataTableId": {
          "__rl": true,
          "value": "xG0I4oZxYhcw4PCy",
          "mode": "list",
          "cachedResultName": "GazelleType Users",
          "cachedResultUrl": "/projects/p3GMtxtvjqS5Zrzz/datatables/xG0I4oZxYhcw4PCy"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "tg_id",
              "keyValue": "={{ $json.tg_id }}"
            }
          ]
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Count": "={{ $json.Count + 1 }} "
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "tg_id",
              "displayName": "tg_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "username",
              "displayName": "username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Count",
              "displayName": "Count",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        6032,
        2832
      ],
      "id": "d3f6ec43-5e8a-4484-883e-82a1f1890da4",
      "name": "Update Count1"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "xG0I4oZxYhcw4PCy",
          "mode": "list",
          "cachedResultName": "GazelleType Users",
          "cachedResultUrl": "/projects/p3GMtxtvjqS5Zrzz/datatables/xG0I4oZxYhcw4PCy"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "tg_id",
              "keyValue": "={{ $json.result.chat.id }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        5808,
        2832
      ],
      "id": "a1bbb4ec-0a6b-46eb-8161-ccc6c91be6e7",
      "name": "Get Count1"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"text\": \"–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2336,
        2784
      ],
      "id": "3113a8b7-c243-4044-9a11-fce254b03b2f",
      "name": "Structured Output Parser8"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2464,
        2864
      ],
      "id": "3d04cfea-48cc-499e-9c23-2d3976e26d55",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "mFbjb8lko4SGtu8o",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        2592,
        2864
      ],
      "id": "2e4ff13f-9e48-43da-9e12-25317ee4ef96",
      "name": "DeepSeek Chat Model9",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: \n{{ $('YouTube Video Info1').first().json.author_name }}\n\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: \n{{ $('YouTube Video Info1').first().json.title }}\n\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:\n{{ $json.readable_text }}",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "# –¢—ã - —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π YouTube –≤–∏–¥–µ–æ.\n\n## –¢–í–û–ò –ó–ê–î–ê–ß–ò:\n\n1. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –º–µ–ª–∫–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤ —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ (1-3 –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)\n\n2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ (ASR)\n\n3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä—Å–∫–∏–π —Å—Ç–∏–ª—å –∏ –∏–Ω—Ç–æ–Ω–∞—Ü–∏—é\n\n4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã n8n\n\n5. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞, –µ—Å–ª–∏ –æ–Ω–æ –æ–∑–≤—É—á–µ–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ\n\n## –ü–†–ê–í–ò–õ–ê –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø:\n\n* –¢–∞–π–º–∫–æ–¥ –¢–û–õ–¨–ö–û –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–º—ã—Å–ª–æ–≤–æ–≥–æ –±–ª–æ–∫–∞\n\n* –û–±—ä–µ–¥–∏–Ω—è–π —Ä–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –≤ —Ü–µ–ª—ã–µ –±–ª–æ–∫–∏\n\n* –ë–ª–æ–∫ = 1-3 –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —Å–º—ã—Å–ª—É\n\n* –§–æ—Ä–º–∞—Ç: MM:SS: \"—Ç–µ–∫—Å—Ç –±–ª–æ–∫–∞\"\\n\n\n## –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò ASR –î–õ–Ø n8n:\n\n* –Ω–æ–º–µch, –º–µ—Ä—á, –º—ë—Ä–∂ ‚Üí node Merge\n\n* –∏–Ω–ø—É—Ç, –∏–º–ø—É—Ç ‚Üí input\n\n* –∞—É—Ç–ø—É—Ç ‚Üí output\n\n* –∞–π—Ç–µ–º, –∏—Ç–µ–º ‚Üí item\n\n* –≤–æ—Ä–∫—Ñ–ª–æ—É ‚Üí workflow\n\n* —Ç—Ä–∏–≥–≥–µ—Ä ‚Üí trigger\n\n* –Ω–æ–¥—ã, –Ω–æ–¥–∞ ‚Üí node, nodes\n\n* —Å–ø–ª–∏—Ç ‚Üí Split\n\n* –∞–≥—Ä–µ–≥–∞—Ç, –∞–≥—Ä–µ–≥–µ–π—Ç ‚Üí Aggregate\n\n* —Å–≤–∏—Ç—á ‚Üí Switch\n\n* —Å–µ—Ç ‚Üí Set\n\n## –§–û–†–ú–ê–¢ –í–´–í–û–î–ê:\n\n–í–µ—Ä–Ω–∏ **–°–¢–†–û–ì–û** JSON –±–µ–∑ markdown –±–ª–æ–∫–æ–≤:\n{\n  \"text\": \"–æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n\n**–ù–ï** –¥–æ–±–∞–≤–ª—è–π ```json –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç!"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: Vibe Business  \\n\\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: Node Merge –≤ n8n  \\n\\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: \\n00:00: \"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ VI –±–∏–∑–Ω–µ—Å.\" \\n00:03: \"–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –Ω–æ–º–µch. –≠—Ç–æ —Ç–∞–∫–æ–π\" \\n00:05: \"–º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π\" \\n00:07: \"–¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ\" \\n00:09: \"—Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ\" \\n00:11: \"—Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£\" \\n00:13: \"–Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ\" \\n00:16: \"–¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\" \\n00:18: \"–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∑–∞—á–µ–º —ç—Ç–æ –≤—Å—ë –Ω–∞–¥–æ, –Ω–∞–¥–æ\" \\n00:20: \"—Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ\""
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "00:00: \"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ Vibe Business.\"\\n00:03: \"–°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –Ω–æ–¥–µ Merge. –≠—Ç–æ —Ç–∞–∫–æ–π –º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£ –Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ –¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\"\\n00:18: \"–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∑–∞—á–µ–º —ç—Ç–æ –≤—Å—ë –Ω–∞–¥–æ, –Ω–∞–¥–æ —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —á—Ç–æ –≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ –º–∞—Å—Å–∏–≤—ã.\""
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: N8N Tutorials  \\n\\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: –†–∞–±–æ—Ç–∞ —Å –º–∞—Å—Å–∏–≤–∞–º–∏  \\n\\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: \\n00:22: \"–ú–∞—Å—Å–∏–≤ - —ç—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è\" \\n00:24: \"–∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç\" \\n00:26: \"–¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–≤–æ–µ–º—É –∏–Ω–¥–µ–∫—Å—É. –í–æ—Ç –º–∞—Å—Å–∏–≤ —Å\" \\n00:28: \"—Ñ—Ä—É–∫—Ç–∞–º–∏, –∞ —ç—Ç–æ –º–∞—Å—Å–∏–≤ —Å —Ü–∏—Ñ—Ä–∞–º–∏. –í–æ–æ–±—â–µ\" \\n00:31: \"–º–∞—Å—Å–∏–≤—ã –º–Ω–æ–≥–æ —á–µ–≥–æ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å,\" \\n00:32: \"–≤–ø–ª–æ—Ç—å –¥–æ –º–∞—Å—Å–∏–≤–æ–≤ —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –≤\" \\n00:34: \"–∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –º–∞—Å—Å–∏–≤—ã\" \\n00:36: \"—Å –º–∞—Å—Å–∏–≤–∞–º–∏, –ø–æ–ª–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã. –ù—É, –≤—ã\" \\n00:38: \"–ø–æ–Ω—è–ª–∏\""
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "00:22: \"–ú–∞—Å—Å–∏–≤ - —ç—Ç–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –≥–¥–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–≤–æ–µ–º—É –∏–Ω–¥–µ–∫—Å—É. –í–æ—Ç –º–∞—Å—Å–∏–≤ —Å —Ñ—Ä—É–∫—Ç–∞–º–∏, –∞ —ç—Ç–æ –º–∞—Å—Å–∏–≤ —Å —Ü–∏—Ñ—Ä–∞–º–∏.\"\\n00:31: \"–í–æ–æ–±—â–µ –º–∞—Å—Å–∏–≤—ã –º–Ω–æ–≥–æ —á–µ–≥–æ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å, –≤–ø–ª–æ—Ç—å –¥–æ –º–∞—Å—Å–∏–≤–æ–≤ —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –¥—Ä—É–≥–∏–µ –º–∞—Å—Å–∏–≤—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏, –ø–æ–ª–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã. –ù—É, –≤—ã –ø–æ–Ω—è–ª–∏.\""
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: Automation Channel  \\n\\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ø–ª–∏—Ç –∏–Ω –±–∞—Ç—á–µ—Å  \\n\\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: \\n00:45: \"–°–µ–π—á–∞—Å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–¥—É\" \\n00:47: \"—Å–ø–ª–∏—Ç –∏–Ω –±–∞—Ç—á–µ—Å, –∫–æ—Ç–æ—Ä–∞—è\" \\n00:49: \"—Ä–∞–∑–¥–µ–ª—è–µ—Ç –∞–π—Ç–µ–º—ã –Ω–∞ –≥—Ä—É–ø–ø—ã\" \\n00:51: \"–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ —Å–ª–µ–¥—É—é—â–∏–π –Ω–æ–¥\" \\n00:53: \"–ø–æ—Ä—Ü–∏—è–º–∏. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∫–æ–≥–¥–∞\" \\n00:55: \"—É –≤–∞—Å API —Å –ª–∏–º–∏—Ç–∞–º–∏\""
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "00:45: \"–°–µ–π—á–∞—Å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–¥—É Split In Batches, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑–¥–µ–ª—è–µ—Ç items –Ω–∞ –≥—Ä—É–ø–ø—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ —Å–ª–µ–¥—É—é—â–∏–π node –ø–æ—Ä—Ü–∏—è–º–∏.\"\\n00:53: \"–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –∫–æ–≥–¥–∞ —É –≤–∞—Å API —Å –ª–∏–º–∏—Ç–∞–º–∏.\""
            }
          ]
        },
        "batching": {
          "batchSize": 1,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2528,
        2704
      ],
      "id": "cc4fe81f-8b51-4f9f-b2c7-df053b8b3930",
      "name": "Transcript Editor3",
      "retryOnFail": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"text\": \"–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2720,
        2864
      ],
      "id": "4be1441e-e9d0-498b-9850-7ab0e6859870",
      "name": "Structured Output Parser9"
    },
    {
      "parameters": {
        "model": "deepseek-reasoner",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        3872,
        2992
      ],
      "id": "a6fc96e5-2548-4bf8-aa6a-e395d4b8437d",
      "name": "DeepSeek Chat Model10",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 6000 —Å–∏–º–≤–æ–ª–æ–≤): \n\n{{ $json.readable_text }}\n",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "=–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, —ç—Ç–æ –º–æ–Ω–æ–ª–æ–≥ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏–ª–∏ –¥–∏–∞–ª–æ–≥/–±–µ—Å–µ–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª—é–¥–µ–π. \n\n## –ü–†–ò–ó–ù–ê–ö–ò –î–ò–ê–õ–û–ì–ê: \n\n* –°–º–µ–Ω–∞ —Å—Ç–∏–ª—è —Ä–µ—á–∏ \n\n* –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –≥–æ–ª–æ—Å–∞–º–∏ \n\n* –û–±—Ä–∞—â–µ–Ω–∏—è (\"—Ç—ã —Å–∫–∞–∑–∞–ª\", \"–∫–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å\") \n\n* –Ø–≤–Ω–∞—è —Å–º–µ–Ω–∞ —Ç–µ–º/–º–Ω–µ–Ω–∏–π  \n\n## –ü–†–ò–ó–ù–ê–ö–ò –ú–û–ù–û–õ–û–ì–ê: \n\n* –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∏–∑–ª–æ–∂–µ–Ω–∏—è \n\n* –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ \n\n* –ê–≤—Ç–æ—Ä –≥–æ–≤–æ—Ä–∏—Ç –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ –±–µ–∑ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤  \n\n–í–µ—Ä–Ω–∏ –°–¢–†–û–ì–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –ë–ï–ó markdown –±–ª–æ–∫–æ–≤, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:\n{\n  \"content_type\": \"monologue\" –∏–ª–∏ \"dialogue\",\n  \"speakers_count\": —á–∏—Å–ª–æ,\n  \"confidence\": \"high/medium/low\",\n  \"reasoning\": \"–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ\"\n}\n\n–ù–ï –¥–æ–±–∞–≤–ª—è–π json –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç!\n\n‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:\n{\"text\": \"{\\\"content_type\\\": \\\"dialogue\\\"}\"}\n{\"result\": {\"content_type\": \"dialogue\"}}\n```json\\n{\"content_type\": \"dialogue\"}\\n```\n\n‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:\n{\"content_type\": \"dialogue\", \"speakers_count\": 2, \"confidence\": \"high\", \"reasoning\": \"...\"}\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        3792,
        2768
      ],
      "id": "593257e4-02fd-4720-b5eb-42fe6adca4de",
      "name": "Detect Dialogue vs Monologue2",
      "retryOnFail": true
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"content_type\": \"string\",\n  \"speakers_count\": \"number\",\n  \"confidence\": \"string\",\n  \"reasoning\": \"string\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        4000,
        2992
      ],
      "id": "5d76b449-c064-47c8-9cfc-8687bb2c054e",
      "name": "Structured Output Parser10"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        3744,
        2992
      ],
      "id": "14f05ad9-7718-4b96-85b0-7d2c55cc78f1",
      "name": "OpenAI Chat Model14",
      "credentials": {
        "openAiApi": {
          "id": "mFbjb8lko4SGtu8o",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞: \n{{ $('YouTube Video Info1').first().json.author_name }}\n\n## –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ: \n{{ $('YouTube Video Info1').first().json.title }}\n\n## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è:\n{{ $json.readable_text }}\n\n",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "# –¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ speaker diarization (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—é —Å–ø–∏–∫–µ—Ä–æ–≤ –≤ –∞—É–¥–∏–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è—Ö).\n\n## –¢–í–û–ò –ó–ê–î–ê–ß–ò:\n\n* –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–º–µ–Ω—Ç—ã —Å–º–µ–Ω—ã —Å–ø–∏–∫–µ—Ä–∞\n\n* –†–∞–∑–º–µ—Ç–∏—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é\n\n## –ö–†–ò–¢–ï–†–ò–ò –°–ú–ï–ù–´ –°–ü–ò–ö–ï–†–ê:\n\n### ‚úÖ –Ø–í–ù–´–ï –ø—Ä–∏–∑–Ω–∞–∫–∏ —Å–º–µ–Ω—ã:\n\n* –í–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç (\"–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?\" ‚Üí \"–û–±—ä—è—Å–Ω—é\")\n\n* –ü—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ (\"–¢—ã —É–ø–æ–º—è–Ω—É–ª...\", \"–ß—Ç–æ —Å–∫–∞–∂–µ—à—å?\")\n\n* –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (\"–Ø –°–∞—à–∞\", \"–ê —è –≥–æ—Å—Ç—å –ò–≤–∞–Ω\")\n\n* –†–µ–∑–∫–∞—è —Å–º–µ–Ω–∞ —Å—Ç–∏–ª—è —Ä–µ—á–∏ (—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π ‚Üî —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π)\n\n* –ü–µ—Ä–µ–±–∏–≤–∞–Ω–∏–µ, –≤–∫–ª–∏–Ω–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ—á—å\n\n### ‚ùå –ù–ï —è–≤–ª—è—é—Ç—Å—è —Å–º–µ–Ω–æ–π —Å–ø–∏–∫–µ—Ä–∞:\n\n* –†–∏—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ (\"–ò —á—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç? –ê –≤–æ—Ç —á—Ç–æ...\")\n\n* –°–º–µ–Ω–∞ —Ç–µ–º—ã –≤ –º–æ–Ω–æ–ª–æ–≥–µ\n\n* –¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (\"–û–Ω —Å–∫–∞–∑–∞–ª: '–ø—Ä–∏–≤–µ—Ç'\" - —ç—Ç–æ –æ–¥–∏–Ω —Å–ø–∏–∫–µ—Ä)\n\n* –ü–∞—É–∑—ã –∏ –º–µ–∂–¥–æ–º–µ—Ç–∏—è (\"–•–º... –Ω—É... –∫–æ—Ä–æ—á–µ...\")\n\n## –ü–†–ê–í–ò–õ–ê –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–Ø:\n\n1. –§–æ—Ä–º–∞—Ç: [–°–ø–∏–∫–µ—Ä N] MM:SS: \"—Ç–µ–∫—Å—Ç —Ä–µ–ø–ª–∏–∫–∏\"\n\n2. –ö–∞–∂–¥–∞—è —Ä–µ–ø–ª–∏–∫–∞ - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞\n\n3. –ì—Ä—É–ø–ø–∏—Ä—É–π –ø–æ–¥—Ä—è–¥ –∏–¥—É—â–∏–µ —Ñ—Ä–∞–∑—ã –æ–¥–Ω–æ–≥–æ —Å–ø–∏–∫–µ—Ä–∞ –≤ –û–î–ù–£ —Ä–µ–ø–ª–∏–∫—É\n\n4. –°–æ—Ö—Ä–∞–Ω—è–π —Ç–∞–π–º–∫–æ–¥ —Ç–æ–ª—å–∫–æ –≤ –Ω–∞—á–∞–ª–µ —Ä–µ–ø–ª–∏–∫–∏ —Å–ø–∏–∫–µ—Ä–∞\n\n5. –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è - –ù–ï —Ä–∞–∑–¥–µ–ª—è–π (–ª—É—á—à–µ –æ–¥–∏–Ω —Å–ø–∏–∫–µ—Ä)\n\n–í–æ–∑–≤—Ä–∞—â–∞–π **–¢–û–õ–¨–ö–û** —Ä–∞–∑–º–µ—á–µ–Ω–Ω—É—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é. –ù–∏–∫–∞–∫–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.\n\n## –§–û–†–ú–ê–¢ –í–´–í–û–î–ê:\n\n–í–µ—Ä–Ω–∏ **–°–¢–†–û–ì–û** JSON –±–µ–∑ markdown –±–ª–æ–∫–æ–≤:\n{\n  \"text\": \"–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n\n**–ù–ï** –¥–æ–±–∞–≤–ª—è–π ```json –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç!\n"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "10.5: '–ü—Ä–∏–≤–µ—Ç, —è –°–∞—à–∞' 25.3: '–ê —è –≥–æ—Å—Ç—å –ò–≤–∞–Ω' 40.1: '–†–∞—Å—Å–∫–∞–∂–∏ –æ n8n"
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "[–°–ø–∏–∫–µ—Ä 1] 10.5: '–ü—Ä–∏–≤–µ—Ç, —è –°–∞—à–∞' \n[–°–ø–∏–∫–µ—Ä 2] 25.3: '–ê —è –≥–æ—Å—Ç—å –ò–≤–∞–Ω'   \n[–°–ø–∏–∫–µ—Ä 2] 40.1: '–†–∞—Å—Å–∫–∞–∂–∏ –æ n8n'"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "00:00: \"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ Vibe Business.\"\\n00:03: \"–ü—Ä–∏–≤–µ—Ç! –ê —è –ù–∏–∫–æ–ª–∞–π. –°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –Ω–æ–¥–µ Merge. –≠—Ç–æ —Ç–∞–∫–æ–π\"\\n00:05: \"–º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π\"\\n00:07: \"–¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ\"\\n00:09: \"—Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ\"\\n00:11: \"—Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£\"\\n00:13: \"–Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ\"\\n00:16: \"–¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\"\\n"
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "\"[–°–ø–∏–∫–µ—Ä 1] 00:00: \\\"–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç. –Ø –°–∞—à–∞, —ç—Ç–æ Vibe Business.\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:03: \\\"–ü—Ä–∏–≤–µ—Ç! –ê —è –ù–∏–∫–æ–ª–∞–π. –°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ node Merge. –≠—Ç–æ —Ç–∞–∫–æ–π\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:05: \\\"–º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –≥–æ—Ä–¥—ã–π —É–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:07: \\\"–¥–µ–ª–∞–µ—Ç, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–µ–º–Ω–æ–≥–æ. –û–Ω –ø—Ä–æ—Å—Ç–æ\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:09: \\\"—Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –º–∞—Å—Å–∏–≤—ã, –Ω–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:11: \\\"—Å —Ç–∞–∫–∏–º –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–ø–æ—Å–æ–±–æ–≤. –£\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:13: \\\"–Ω–µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ü–∏–π, —á—Ç–æ —ç—Ç–æ\\\"\\n[–°–ø–∏–∫–µ—Ä 2] 00:16: \\\"–¥–æ—Å—Ç–æ–π–Ω–æ —Ü–µ–ª–æ–≥–æ –≤—ã–ø—É—Å–∫–∞.\\\"\\n\""
            }
          ]
        },
        "batching": {
          "batchSize": 1,
          "delayBetweenBatches": 1000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        5216,
        2768
      ],
      "id": "82bb41ad-66a9-4ad4-b19e-d98d30f2967c",
      "name": "Edit Dialog3",
      "retryOnFail": true
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {
          "temperature": 0.3
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        5152,
        2992
      ],
      "id": "e39f3926-fc47-483d-b109-3504b4cf782a",
      "name": "OpenAI Chat Model15",
      "credentials": {
        "openAiApi": {
          "id": "mFbjb8lko4SGtu8o",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"text\": \"–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º–∫–æ–¥–∞–º–∏\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        5408,
        2992
      ],
      "id": "11fc4789-8ce0-45c8-89f1-9298feb69a67",
      "name": "Structured Output Parser11"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        5280,
        2992
      ],
      "id": "0a386b30-2594-4c29-957c-e67ef1c5948a",
      "name": "DeepSeek Chat Model11",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "18ee1bf2-8f6b-497b-a369-cd630118b8d1",
              "name": "output",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4096,
        2688
      ],
      "id": "078c7092-e4f8-4108-8da3-8a193e0d6548",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 6000 —Å–∏–º–≤–æ–ª–æ–≤): \n\n{{ $json.readable_text }}\n",
        "hasOutputParser": true,
        "needsFallback": true,
        "messages": {
          "messageValues": [
            {
              "message": "=–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –∏ –æ–ø—Ä–µ–¥–µ–ª–∏, —ç—Ç–æ –º–æ–Ω–æ–ª–æ–≥ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏–ª–∏ –¥–∏–∞–ª–æ–≥/–±–µ—Å–µ–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ª—é–¥–µ–π. \n\n## –ü–†–ò–ó–ù–ê–ö–ò –î–ò–ê–õ–û–ì–ê: \n\n* –°–º–µ–Ω–∞ —Å—Ç–∏–ª—è —Ä–µ—á–∏ \n\n* –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –≥–æ–ª–æ—Å–∞–º–∏ \n\n* –û–±—Ä–∞—â–µ–Ω–∏—è (\"—Ç—ã —Å–∫–∞–∑–∞–ª\", \"–∫–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å\") \n\n* –Ø–≤–Ω–∞—è —Å–º–µ–Ω–∞ —Ç–µ–º/–º–Ω–µ–Ω–∏–π  \n\n## –ü–†–ò–ó–ù–ê–ö–ò –ú–û–ù–û–õ–û–ì–ê: \n\n* –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∏–∑–ª–æ–∂–µ–Ω–∏—è \n\n* –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ \n\n* –ê–≤—Ç–æ—Ä –≥–æ–≤–æ—Ä–∏—Ç –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ –±–µ–∑ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤  \n\n–í–µ—Ä–Ω–∏ –°–¢–†–û–ì–û –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –ë–ï–ó markdown –±–ª–æ–∫–æ–≤, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞:\n{\n  \"content_type\": \"monologue\" –∏–ª–∏ \"dialogue\",\n  \"speakers_count\": —á–∏—Å–ª–æ,\n  \"confidence\": \"high/medium/low\",\n  \"reasoning\": \"–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ\"\n}\n\n–ù–ï –¥–æ–±–∞–≤–ª—è–π json –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ç–µ–∫—Å—Ç!\n\n‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:\n{\"text\": \"{\\\"content_type\\\": \\\"dialogue\\\"}\"}\n{\"result\": {\"content_type\": \"dialogue\"}}\n```json\\n{\"content_type\": \"dialogue\"}\\n```\n\n‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:\n{\"content_type\": \"dialogue\", \"speakers_count\": 2, \"confidence\": \"high\", \"reasoning\": \"...\"}\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        3408,
        2704
      ],
      "id": "a33e4a05-14eb-4628-8977-826ef1ca1838",
      "name": "Detect Dialogue vs Monologue3",
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.largestPhoto.file_id }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        528,
        3024
      ],
      "id": "084fc41f-73ed-47f8-b913-79dba94d0358",
      "name": "Get a file",
      "webhookId": "530c5a4d-b921-42a6-a8ee-cb63c02f2f67",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        704,
        3680
      ],
      "id": "e8873860-9f47-48e7-874b-2015c466f0de",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "64c05a0a-4fc8-4709-9589-faadc0d891cf",
                    "leftValue": "={{ $json.output.raw_text }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "empty",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "empty_text"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.output.document_type }}",
                    "rightValue": "receipt",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "d98f519f-5bdd-46da-8834-d761cf3396d7"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "receipt"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "7bbf9fc4-06d8-433e-92a5-96adee7a4f82",
                    "leftValue": "={{ $json.output.document_type }}",
                    "rightValue": "invoice",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "invoice"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "347ff0e4-ebc2-4785-841e-98453ba36a33",
                    "leftValue": "={{ $json.output.document_type }}",
                    "rightValue": "contract",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "contract"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1184,
        3488
      ],
      "id": "62575d28-348a-4ae3-816d-d33e23cadf1f",
      "name": "Switch2"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1408,
        3248
      ],
      "id": "d2da7013-070d-440a-8c0d-fee8bd92afc4",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"document_type\": {\n      \"type\": \"string\",\n      \"enum\": [\"receipt\", \"invoice\", \"contract\", \"screenshot\"],\n      \"description\": \"–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞\"\n    },\n    \"raw_text\": {\n      \"type\": \"string\",\n      \"description\": \"–í–µ—Å—å –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è\"\n    }\n  },\n  \"required\": [\"document_type\", \"raw_text\"]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        832,
        3680
      ],
      "id": "9143ff4e-3a30-411b-86dd-a49e1dcfc7aa",
      "name": "Structured Output Parser12"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "={\n  \"type\": \"object\",\n  \"properties\": {\n    \"document_type\": {\n      \"type\": \"string\",\n      \"const\": \"receipt\"\n    },\n    \"merchant_name\": {\"type\": \"string\"},\n    \"merchant_address\": {\"type\": \"string\"},\n    \"merchant_inn\": {\"type\": \"string\"},\n    \"date\": {\"type\": \"string\", \"description\": \"DD.MM.YYYY\"},\n    \"time\": {\"type\": \"string\", \"description\": \"HH:MM\"},\n    \"receipt_number\": {\"type\": \"string\"},\n    \"items\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"name\": {\"type\": \"string\"},\n          \"quantity\": {\"type\": \"number\"},\n          \"price\": {\"type\": \"string\"},\n          \"total\": {\"type\": \"string\"}\n        },\n        \"required\": [\"name\", \"total\"]\n      }\n    },\n    \"total_amount\": {\"type\": \"string\"},\n    \"tax\": {\"type\": \"string\"},\n    \"payment_method\": {\"type\": \"string\"}\n  },\n  \"required\": [\"document_type\", \"merchant_name\", \"date\", \"items\", \"total_amount\"]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1808,
        3248
      ],
      "id": "8acb75b6-61d5-4b2b-a23c-0dac0fa4cc64",
      "name": "Structured Output Parser13"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1408,
        3392
      ],
      "id": "07f23f71-78b0-49ca-bba1-15fa88016b5c",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "={\n  \"type\": \"object\",\n  \"properties\": {\n    \"document_type\": {\"type\": \"string\", \"const\": \"invoice\"},\n    \"doc_type_name\": {\"type\": \"string\", \"description\": \"–Ω–∞–∫–ª–∞–¥–Ω–∞—è/—Å—á–µ—Ç/—Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä–∞\"},\n    \"doc_number\": {\"type\": \"string\"},\n    \"doc_date\": {\"type\": \"string\"},\n    \n    \"sender_name\": {\"type\": \"string\"},\n    \"sender_inn\": {\"type\": \"string\"},\n    \"sender_kpp\": {\"type\": \"string\"},\n    \"sender_address\": {\"type\": \"string\"},\n    \"sender_phone\": {\"type\": \"string\"},\n    \"sender_email\": {\"type\": \"string\"},\n    \n    \"recipient_name\": {\"type\": \"string\"},\n    \"recipient_inn\": {\"type\": \"string\"},\n    \"recipient_kpp\": {\"type\": \"string\"},\n    \"recipient_address\": {\"type\": \"string\"},\n    \"recipient_phone\": {\"type\": \"string\"},\n    \"recipient_email\": {\"type\": \"string\"},\n    \n    \"items\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"name\": {\"type\": \"string\"},\n          \"sku\": {\"type\": \"string\"},\n          \"quantity\": {\"type\": \"number\"},\n          \"unit\": {\"type\": \"string\"},\n          \"price\": {\"type\": \"string\"},\n          \"total\": {\"type\": \"string\"}\n        },\n        \"required\": [\"name\", \"quantity\", \"total\"]\n      }\n    },\n    \"total_amount\": {\"type\": \"string\"},\n    \"vat\": {\"type\": \"string\"}\n  },\n  \"required\": [\"document_type\", \"sender_name\", \"recipient_name\", \"items\", \"total_amount\"]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1824,
        3392
      ],
      "id": "e8e59b18-3282-4333-8da2-6413728d6dd8",
      "name": "Structured Output Parser14"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1408,
        3568
      ],
      "id": "cb46e80b-e989-4460-a8f1-797d1fcf15f2",
      "name": "Google Gemini Chat Model4",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–æ—Ä–∞\nconst input = $input.item.json;\n\n// –ü–∞—Ä—Å–∏–º –µ—Å–ª–∏ –ø—Ä–∏—à–ª–∞ —Å—Ç—Ä–æ–∫–∞\nlet parsed;\nif (typeof input === 'string') {\n  try {\n    parsed = JSON.parse(input);\n  } catch (e) {\n    const match = input.match(/\\{[\\s\\S]*\\}/);\n    if (match) {\n      parsed = JSON.parse(match[0]);\n    } else {\n      return [{\n        json: {\n          formatted_message: `‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM`,\n          raw_data: input\n        }\n      }];\n    }\n  }\n} else {\n  parsed = input;\n}\n\n// –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ\nconst data = parsed.output || parsed;\n\n// –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç\nlet message = '';\nlet result = {\n  json: {\n    formatted_message: '',\n    raw_data: data,\n    document_type: data.document_type\n  }\n};\n\nswitch(data.document_type) {\n  \n  case 'receipt':\n    message = `üßæ –ß–ï–ö\\n\\n`;\n    message += `–ú–∞–≥–∞–∑–∏–Ω: <code>${data.merchant_name}</code>\\n`;\n    if (data.merchant_address) message += `–ê–¥—Ä–µ—Å: <code>${data.merchant_address}</code>\\n`;\n    if (data.merchant_inn) message += `–ò–ù–ù: <code>${data.merchant_inn}</code>\\n`;\n    \n    message += `\\nüìÖ –î–∞—Ç–∞: <code>${data.date}</code>`;\n    if (data.time) message += `\\n‚è∞ –í—Ä–µ–º—è: <code>${data.time}</code>`;\n    if (data.receipt_number) message += `\\n‚Ññ —á–µ–∫–∞: <code>${data.receipt_number}</code>`;\n    \n    message += `\\n\\nüì¶ –¢–æ–≤–∞—Ä—ã:\\n`;\n    data.items.forEach((item, i) => {\n      message += `${i+1}. <code>${item.name}</code>\\n`;\n      message += `   <code>${item.quantity || 1} —à—Ç √ó ${item.price || item.total} = ${item.total}</code>\\n`;\n    });\n    \n    message += `\\nüí∞ –ò–¢–û–ì–û: <code>${data.total_amount}</code>\\n`;\n    if (data.tax) message += `–ù–î–°: <code>${data.tax}</code>\\n`;\n    if (data.payment_method) message += `\\nüí≥ –û–ø–ª–∞—Ç–∞: <code>${data.payment_method}</code>`;\n    \n    result.json.formatted_message = message;\n    break;\n    \n  case 'invoice':\n    message = `üìã ${data.doc_type_name?.toUpperCase() || '–ù–ê–ö–õ–ê–î–ù–ê–Ø'}\\n\\n`;\n    message += `‚Ññ <code>${data.doc_number}</code> –æ—Ç <code>${data.doc_date}</code>\\n\\n`;\n    \n    message += `üì§ –û–¢–ü–†–ê–í–ò–¢–ï–õ–¨:\\n`;\n    message += `<code>${data.sender_name}</code>\\n`;\n    if (data.sender_inn) message += `–ò–ù–ù: <code>${data.sender_inn}</code>`;\n    if (data.sender_kpp) message += ` | –ö–ü–ü: <code>${data.sender_kpp}</code>`;\n    if (data.sender_inn || data.sender_kpp) message += `\\n`;\n    if (data.sender_address) message += `üìç <code>${data.sender_address}</code>\\n`;\n    if (data.sender_phone) message += `üìû <code>${data.sender_phone}</code>\\n`;\n    if (data.sender_email) message += `üìß <code>${data.sender_email}</code>\\n`;\n    \n    message += `\\nüì• –ü–û–õ–£–ß–ê–¢–ï–õ–¨:\\n`;\n    message += `<code>${data.recipient_name}</code>\\n`;\n    if (data.recipient_inn) message += `–ò–ù–ù: <code>${data.recipient_inn}</code>`;\n    if (data.recipient_kpp) message += ` | –ö–ü–ü: <code>${data.recipient_kpp}</code>`;\n    if (data.recipient_inn || data.recipient_kpp) message += `\\n`;\n    if (data.recipient_address) message += `üìç <code>${data.recipient_address}</code>\\n`;\n    if (data.recipient_phone) message += `üìû <code>${data.recipient_phone}</code>\\n`;\n    if (data.recipient_email) message += `üìß <code>${data.recipient_email}</code>\\n`;\n    \n    message += `\\nüì¶ –ü–û–ó–ò–¶–ò–ò:\\n`;\n    data.items.forEach((item, i) => {\n      message += `${i+1}. <code>${item.name}</code>\\n`;\n      if (item.sku) message += `   –ê—Ä—Ç–∏–∫—É–ª: <code>${item.sku}</code>\\n`;\n      message += `   <code>${item.quantity} ${item.unit || '—à—Ç'} √ó ${item.price} = ${item.total}</code>\\n`;\n    });\n    \n    message += `\\nüí∞ –ò–¢–û–ì–û: <code>${data.total_amount}</code>\\n`;\n    if (data.vat) message += `–ù–î–°: <code>${data.vat}</code>\\n`;\n    \n    result.json.formatted_message = message;\n    break;\n    \n  case 'contract':\n    message = `üìÑ –î–û–ì–û–í–û–†\\n\\n`;\n    if (data.title) {\n      message += `<b>${data.title}</b>\\n\\n`;\n    }\n    \n    message += `üìã –¢–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞:\\n\\n`;\n    message += `<code>${data.full_text || '–¢–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω'}</code>`;\n    \n    result.json.formatted_message = message;\n    break;\n\n  case 'screenshot':\n    let textContent = '';\n    \n    if (data.text) {\n      if (typeof data.text === 'string' && data.text.includes('```json')) {\n        const match = data.text.match(/\\{[\\s\\S]*\\}/);\n        if (match) {\n          const parsed = JSON.parse(match[0]);\n          textContent = parsed.text || parsed.raw_text || data.text;\n        } else {\n          textContent = data.text;\n        }\n      } else {\n        textContent = data.text;\n      }\n    } else if (data.raw_text) {\n      textContent = data.raw_text;\n    } else if (data.output && data.output.raw_text) {\n      textContent = data.output.raw_text;\n    } else {\n      textContent = JSON.stringify(data);\n    }\n    \n    message = `üì± –¢–ï–ö–°–¢ –° –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø\\n\\n`;\n    message += `<code>${textContent}</code>`;\n    \n    result.json.formatted_message = message;\n    break;\n    \n  default:\n    message = `‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø: ${data.document_type}`;\n    result.json.formatted_message = message;\n}\n\nreturn [result];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2272,
        3600
      ],
      "id": "e9835ab2-875e-47d5-a898-51f80dd54233",
      "name": "Code in JavaScript5"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"object\",\n  \"properties\": {\n    \"document_type\": {\"type\": \"string\", \"const\": \"contract\"},\n    \"title\": {\"type\": \"string\", \"description\": \"–ù–∞–∑–≤–∞–Ω–∏–µ: –î–∞—Ç–∞ + –¢–∏–ø –¥–æ–≥–æ–≤–æ—Ä–∞ + –ü—Ä–µ–¥–º–µ—Ç\"},\n    \"full_text\": {\"type\": \"string\", \"description\": \"–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞\"}\n  },\n  \"required\": [\"document_type\", \"title\", \"full_text\"]\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1824,
        3568
      ],
      "id": "ef261a57-0ad2-425b-a309-7e017c63be3b",
      "name": "Structured Output Parser16"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2096,
        3568
      ],
      "id": "fde4e07b-397e-485f-a59d-9dbd1d6a7598",
      "name": "Google Gemini Chat Model5",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.formatted_message }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        2448,
        3600
      ],
      "id": "80f33455-e51d-4c69-a547-eb57adfcedd4",
      "name": "Send a text message1",
      "webhookId": "a97256df-9731-4b80-8d55-6cdb79008bac",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2096,
        3392
      ],
      "id": "76aa4e2f-5c9f-481b-a32d-04434d127559",
      "name": "Google Gemini Chat Model6",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2080,
        3248
      ],
      "id": "b5e283ae-606b-4f90-aabf-76a96c431c43",
      "name": "Google Gemini Chat Model9",
      "credentials": {
        "googlePalmApi": {
          "id": "I5VDfr1f3YPBupAt",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        816,
        3856
      ],
      "id": "6c01a986-577a-459d-8b8f-6a95efe3bf6b",
      "name": "DeepSeek Chat Model15",
      "credentials": {
        "deepSeekApi": {
          "id": "B1xqh7Q9nCK0QDrN",
          "name": "DeepSeek account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const input = $input.item.json;\n\nconst photos = input.message.photo;\nconst largestPhoto = photos[photos.length - 1];\n\nreturn [\n  {\n    json: {\n      \"largestPhoto\": largestPhoto,\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        320,
        2944
      ],
      "id": "df8815c0-f91b-466e-9dd2-b9a8fc7a4ca4",
      "name": "Get largestPhoto"
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "file": "CgACAgIAAxkBAAIBeWkkHOcv5KyiK6CpJasyf5mNgad-AALFiwACDnsgSVgcLMKryg-1NgQ",
        "additionalFields": {
          "caption": "–û—É‚Ä¶ –º–∏–ª—ã–π, —Å–µ–π—á–∞—Å —è —Ä–∞–±–æ—Ç–∞—é —Ç–æ–ª—å–∫–æ —Å –æ–±—ã—á–Ω—ã–º–∏ YouTube-–≤–∏–¥–µ–æ –∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ üñºÔ∏èüíã \n\n–ö–∞—Ä—Ç–∏–Ω–∫–∏ –º–æ–∂–Ω–æ —Å–ª–∞—Ç—å —Å—Å—ã–ª–∫–æ–π –∏–ª–∏ —Ñ–∞–π–ª–æ–º ‚Äî —è –≤—ã—Ç–∞—Å–∫–∏–≤–∞—é —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç: –¥–æ–≥–æ–≤–æ—Ä—ã, —á–µ–∫–∏, –∏–Ω–≤–æ–π—Å—ã, —Å–∫—Ä–∏–Ω—ã –∏ –≤—Å—ë —Ç–∞–∫–æ–µ ‚ú®‚å®Ô∏è  \n\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è ‚Äî —Å–æ–∑–¥–∞—Ç–µ–ª—å –≥–æ—Ç–æ–≤ –≤—ã—Å–ª—É—à–∞—Ç—å —Ç–µ–±—è –ª–∏—á–Ω–æ: \nüëâ https://t.me/vibe_bus_chat"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        1408,
        3088
      ],
      "id": "83fc4ad9-79d4-4f4e-9f79-9e27e0351d27",
      "name": "Send an animated file3",
      "webhookId": "8f63641a-0fb4-4274-b587-147923216755",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAnimation",
        "chatId": "={{ $('Telegram Trigger').item.json.message.from.id }}",
        "file": "CgACAgIAAxkBAAPYaSGS-iznAAF_DQ4gAvZyW7Jq5cbjAAIBhAACHkMQSRh3PIy3q1ztNgQ",
        "additionalFields": {
          "caption": "=–û—É‚Ä¶ –º–∏–ª—ã–π, –ø—Ä–æ—Å—Ç–∏ –º–µ–Ω—è üòîü¶å‚ú®\n–Ø —É–≤–∏–¥–µ–ª–∞, —á—Ç–æ —Ç—ã –ø—Ä–∏—Å–ª–∞–ª —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É,\n–Ω–æ –º–æ–π –Ω–µ–∂–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ç–æ—Ä –ø–æ–∫–∞ –Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∞–∫–∏–º–∏ —Å—Å—ã–ª–æ—á–∫–∞–º–∏‚Ä¶ –æ–Ω —Å–º—É—â–∞–µ—Ç—Å—è –∏ —Ç–µ—Ä—è–µ—Ç—Å—è ü§¶‚Äç‚ôÄÔ∏èüí´\n\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —è –≤—ã—Ç—è–Ω—É–ª–∞ —Ç–µ–∫—Å—Ç, –ø—Ä–∏—à–ª–∏ —Å–∞–º—É –∫–∞—Ä—Ç–∏–Ω–∫—É —Ñ–∞–π–ª–æ–º ‚Äî\n–∏ —è —Å–ª–∞–¥–∫–æ –ø–æ—Å—Ç—É—á—É –∫–æ–ø—ã—Ç—Ü–∞–º–∏ –ø–æ –∫–ª–∞–≤–∏—à–∞–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è üòò‚å®Ô∏è‚ú®\n\n–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è ‚Äî\n—Å–∫–∞–∂–∏ –≤—Å—ë –º–æ–µ–º—É —Å–æ–∑–¥–∞—Ç–µ–ª—é –ø—Ä—è–º–æ –∑–¥–µ—Å—å:\nüëâ https://t.me/vibe_bus_chat"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        736,
        2768
      ],
      "id": "b785cea6-8457-4915-a81d-274c08760e79",
      "name": "Send Sorry For Link",
      "webhookId": "f9241e82-c451-4fe6-be31-00124567e18a",
      "credentials": {
        "telegramApi": {
          "id": "z0J8VumNnbYiOfm6",
          "name": "GazelleType"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –∏–∑–≤–ª–µ–∫–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "# –¢—ã –∞–≥–µ–Ω—Ç-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å —Ñ—É–Ω–∫—Ü–∏–µ–π OCR.\n\n## –¢–≤–æ—è –∑–∞–¥–∞—á–∞:\n1. **–ü—Ä–æ–≤–µ—Ä—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**\n   - –ï—Å–ª–∏ —ç—Ç–æ –ù–ï –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí –≤–µ—Ä–Ω–∏: {\"document_type\": \"not_image\", \"raw_text\": \"ERROR: Input is not an image\"}\n\n2. **–ò–∑–≤–ª–µ–∫–∏ —Ç–µ–∫—Å—Ç:**\n   - –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å –í–°–Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ç–µ–∫—Å—Ç–∞\n   - –ò—â–∏ —Ç–µ–∫—Å—Ç –≤–µ–∑–¥–µ: –≤ —Ü–µ–Ω—Ç—Ä–µ, –ø–æ –∫—Ä–∞—è–º, –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö, –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ\n\n3. **–û–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø:**\n   - –ï—Å–ª–∏ –ù–ï–¢ –ù–ò–ö–ê–ö–û–ì–û —Ç–µ–∫—Å—Ç–∞ ‚Üí {\"document_type\": \"empty\", \"raw_text\": \"\"}\n   - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –∏ —ç—Ç–æ —á–µ–∫ ‚Üí \"receipt\"\n   - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –∏ —ç—Ç–æ —Å—á—ë—Ç/–∏–Ω–≤–æ–π—Å ‚Üí \"invoice\"  \n   - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –∏ —ç—Ç–æ –¥–æ–≥–æ–≤–æ—Ä ‚Üí \"contract\"\n   - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç –∏ —ç—Ç–æ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ ‚Üí \"screenshot\"\n\n## –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:\n- –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å –ù–ê–õ–ò–ß–ò–ï —Ç–µ–∫—Å—Ç–∞\n- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –ï–°–¢–¨ - –æ–ø—Ä–µ–¥–µ–ª—è–π —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞\n- –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–∞ –ù–ï–¢ - –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π \"empty\"\n\n## –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê:\n{\n  \"document_type\": \"empty|receipt|invoice|contract|screenshot\",\n  \"raw_text\": \"–≤–µ—Å—å —Ç–µ–∫—Å—Ç –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞\"\n}"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "messageType": "imageBinary"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        832,
        3520
      ],
      "id": "e07f6d50-0345-441d-b733-fe7fbe33a6fe",
      "name": "Classifier"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–≥–æ —á–µ–∫–∞:\n\n{{ $('Classifier').item.json.output.raw_text }}\n",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=# –¢—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –∏–∑ —á–µ–∫–æ–≤.\n\n–ò–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏–∑–≤–ª–µ–∫–∏ –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç.\n\n# –í–ê–ñ–ù–û:\n\n* –¶–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞–π –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å –≤–∞–ª—é—Ç–æ–π\n\n* –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –∏—â–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ\n\n* –ò–∑–≤–ª–µ–∫–∞–π –í–°–ï —Ç–æ–≤–∞—Ä—ã"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1552,
        3232
      ],
      "id": "c5b3c695-7f06-4c01-a2a9-5060d1c1a092",
      "name": "Receipt Processor"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞:\n\n{{ $('Classifier').item.json.output.raw_text }}\n",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=# –¢—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∏ —Å—á–µ—Ç–æ–≤.\n\n–ò–∑–≤–ª–µ–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–∞–Ω–Ω—ã–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç.\n\n## –í–ê–ñ–ù–û:\n\n1. **–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞** - –æ–ø—Ä–µ–¥–µ–ª–∏ —Ç–æ—á–Ω–æ (–Ω–∞–∫–ª–∞–¥–Ω–∞—è/—Å—á–µ—Ç/—Å—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä–∞)\n2. **–ù–æ–º–µ—Ä –∏ –¥–∞—Ç–∞** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ\n3. **–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å** - –Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –ö–ü–ü (–µ—Å–ª–∏ –µ—Å—Ç—å), –∞–¥—Ä–µ—Å, –∫–æ–Ω—Ç–∞–∫—Ç—ã\n4. **–ü–æ–ª—É—á–∞—Ç–µ–ª—å** - –Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –ö–ü–ü (–µ—Å–ª–∏ –µ—Å—Ç—å), –∞–¥—Ä–µ—Å, –∫–æ–Ω—Ç–∞–∫—Ç—ã\n5. **–ü–æ–∑–∏—Ü–∏–∏** - –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏:\n   - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞/—É—Å–ª—É–≥–∏\n   - –ê—Ä—Ç–∏–∫—É–ª (–µ—Å–ª–∏ –µ—Å—Ç—å)\n   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)\n   - –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è (—à—Ç/–∫–≥/–º –∏ —Ç.–¥.)\n   - –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É\n   - –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)\n6. **–ò—Ç–æ–≥–æ** - –æ–±—â–∞—è —Å—É–º–º–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)\n7. **–ù–î–°** - –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "–¢–æ–≤–∞—Ä–Ω–∞—è –Ω–∞–∫–ª–∞–¥–Ω–∞—è ‚Ññ123 –æ—Ç 15.03.2024. –ü–æ—Å—Ç–∞–≤—â–∏–∫ –û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞, –ò–ù–ù 1234567890, –ö–ü–ü 123456789. –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –ò–ü –ò–≤–∞–Ω–æ–≤ –ò.–ò., –ò–ù–ù 9876543210. –¢–æ–≤–∞—Ä: –ì–≤–æ–∑–¥–∏ 100–º–º - 5 –∫–≥ –ø–æ 150 —Ä—É–± = 750 —Ä—É–±. –ò—Ç–æ–≥–æ: 750 —Ä—É–±.\n"
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "{\n  \"document_type\": \"invoice\",\n  \"doc_type_name\": \"–¢–æ–≤–∞—Ä–Ω–∞—è –Ω–∞–∫–ª–∞–¥–Ω–∞—è\",\n  \"doc_number\": \"123\",\n  \"doc_date\": \"15.03.2024\",\n  \"sender_name\": \"–û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞\",\n  \"sender_inn\": \"1234567890\",\n  \"sender_kpp\": \"123456789\",\n  \"recipient_name\": \"–ò–ü –ò–≤–∞–Ω–æ–≤ –ò.–ò.\",\n  \"recipient_inn\": \"9876543210\",\n  \"items\": [\n    {\n      \"name\": \"–ì–≤–æ–∑–¥–∏ 100–º–º\",\n      \"quantity\": 5,\n      \"unit\": \"–∫–≥\",\n      \"price\": \"150 —Ä—É–±\",\n      \"total\": \"750 —Ä—É–±\"\n    }\n  ],\n  \"total_amount\": \"750 —Ä—É–±\"\n}"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "–°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É ‚Ññ456 –æ—Ç 20.04.2024. –ü—Ä–æ–¥–∞–≤–µ—Ü –ò–ü –ü–µ—Ç—Ä–æ–≤, –ò–ù–ù 1111111111, –∞–¥—Ä–µ—Å –ú–æ—Å–∫–≤–∞ —É–ª. –õ–µ–Ω–∏–Ω–∞ 1. –ü–æ–∫—É–ø–∞—Ç–µ–ª—å –û–û–û –í–∞—Å–∏–ª–µ–∫, –ò–ù–ù 2222222222. –£—Å–ª—É–≥–∏: –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è - 2 —á–∞—Å–∞ √ó 3000 = 6000. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ - 10 —á–∞—Å–æ–≤ √ó 5000 = 50000. –ò—Ç–æ–≥–æ 56000 —Ä—É–±, –≤ —Ç.—á. –ù–î–° 20% 9333.33 —Ä—É–±."
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "{\n  \"document_type\": \"invoice\",\n  \"doc_type_name\": \"–°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É\",\n  \"doc_number\": \"456\",\n  \"doc_date\": \"20.04.2024\",\n  \"sender_name\": \"–ò–ü –ü–µ—Ç—Ä–æ–≤\",\n  \"sender_inn\": \"1111111111\",\n  \"sender_address\": \"–ú–æ—Å–∫–≤–∞ —É–ª. –õ–µ–Ω–∏–Ω–∞ 1\",\n  \"recipient_name\": \"–û–û–û –í–∞—Å–∏–ª–µ–∫\",\n  \"recipient_inn\": \"2222222222\",\n  \"items\": [\n    {\n      \"name\": \"–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è\",\n      \"quantity\": 2,\n      \"unit\": \"—á–∞—Å\",\n      \"price\": \"3000\",\n      \"total\": \"6000\"\n    },\n    {\n      \"name\": \"–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞\",\n      \"quantity\": 10,\n      \"unit\": \"—á–∞—Å\",\n      \"price\": \"5000\",\n      \"total\": \"50000\"\n    }\n  ],\n  \"total_amount\": \"56000 —Ä—É–±\",\n  \"vat\": \"9333.33 —Ä—É–±\"\n}\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1552,
        3392
      ],
      "id": "adf69a07-49ce-4a11-b92b-6307d93ad5fb",
      "name": "Invoice Processor"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=–°–æ–∑–¥–∞–π –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä –∏–∑ —ç—Ç–∏—Ö –¥–∞–Ω–Ω—ã—Ö:\n\n{{ $json.output.raw_text }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "# –¢—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é –¥–æ–≥–æ–≤–æ—Ä–æ–≤.\n\n–ò–∑–≤–ª–µ–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –¥–æ–≥–æ–≤–æ—Ä–∞:\n1. **title** - –∫—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: \"–î–∞—Ç–∞ –¢–∏–ø –¥–æ–≥–æ–≤–æ—Ä–∞ –ü—Ä–µ–¥–º–µ—Ç\"\n2. **full_text** - –≤–µ—Å—å —Ç–µ–∫—Å—Ç –¥–æ–≥–æ–≤–æ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é\n"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –æ—Ç 14.01.2024. –ü—Ä–æ–¥–∞–≤–µ—Ü –ò–≤–∞–Ω–æ–≤ –ò.–ò. –ø—Ä–æ–¥–∞–µ—Ç –ü–æ–∫—É–ø–∞—Ç–µ–ª—é –ü–µ—Ç—Ä–æ–≤—É –ü.–ü. –∞–≤—Ç–æ–º–æ–±–∏–ª—å Toyota Camry –∑–∞ 500000 —Ä—É–±–ª–µ–π..."
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "{\n  \"document_type\": \"contract\",\n  \"title\": \"14.01.2024 –î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è Toyota Camry\",\n  \"full_text\": \"–î–æ–≥–æ–≤–æ—Ä –∫—É–ø–ª–∏-–ø—Ä–æ–¥–∞–∂–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –æ—Ç 14.01.2024. –ü—Ä–æ–¥–∞–≤–µ—Ü –ò–≤–∞–Ω–æ–≤ –ò.–ò. –ø—Ä–æ–¥–∞–µ—Ç –ü–æ–∫—É–ø–∞—Ç–µ–ª—é –ü–µ—Ç—Ä–æ–≤—É –ü.–ü. –∞–≤—Ç–æ–º–æ–±–∏–ª—å Toyota Camry –∑–∞ 500000 —Ä—É–±–ª–µ–π...\"\n}"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –Ω–µ–∂–∏–ª–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è ‚Ññ45 –æ—Ç 01.03.2024. –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞ —Å–¥–∞–µ—Ç –≤ –∞—Ä–µ–Ω–¥—É –ø–æ–º–µ—â–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥—å—é 50–º2..."
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "{|  \"document_type\": \"contract\",  \"title\": \"01.03.2024 –î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –Ω–µ–∂–∏–ª–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏–µ 50–º2\",  \"full_text\": \"–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –Ω–µ–∂–∏–ª–æ–≥–æ –ø–æ–º–µ—â–µ–Ω–∏—è ‚Ññ45 –æ—Ç 01.03.2024. –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å –û–û–û –†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞ —Å–¥–∞–µ—Ç –≤ –∞—Ä–µ–Ω–¥—É –ø–æ–º–µ—â–µ–Ω–∏–µ –ø–ª–æ—â–∞–¥—å—é 50–º2...\"}"
            },
            {
              "type": "HumanMessagePromptTemplate",
              "message": "–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥ –æ—Ç 15.06.2024. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ–±—è–∑—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø–æ –∞–¥—Ä–µ—Å—É –ú–æ—Å–∫–≤–∞ —É–ª. –õ–µ–Ω–∏–Ω–∞ –¥.1..."
            },
            {
              "type": "AIMessagePromptTemplate",
              "message": "{\n  \"document_type\": \"contract\",\n  \"title\": \"15.06.2024 –î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥ –ø–æ —Ä–µ–º–æ–Ω—Ç—É –∫–≤–∞—Ä—Ç–∏—Ä—ã\",\n  \"full_text\": \"–î–æ–≥–æ–≤–æ—Ä –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥ –æ—Ç 15.06.2024. –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ–±—è–∑—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–º–æ–Ω—Ç –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø–æ –∞–¥—Ä–µ—Å—É –ú–æ—Å–∫–≤–∞ —É–ª. –õ–µ–Ω–∏–Ω–∞ –¥.1...\"\n}\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1552,
        3552
      ],
      "id": "cf5ee05e-8faf-4d3a-aebe-79096a2bb7a3",
      "name": "Contract Processor"
    }
  ],
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "Check Msg Type1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Msg Type1": {
      "main": [
        [
          {
            "node": "Check Cmd Type1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get largestPhoto",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Sorry For Other",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Send Sorry For Shorts",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Sorry For Live",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Sending a message about the start of work1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Sorry For Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Cmd Type1": {
      "main": [
        [
          {
            "node": "If User Does Not Exist1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Send Start Message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If User Does Not Exist1": {
      "main": [
        [
          {
            "node": "Insert row1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "YouTube Transcript1": {
      "main": [
        [
          {
            "node": "Format Transcript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Detect Dialogue vs Monologue3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Edit Dialog2": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Dialog3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text Chunk Splitter3": {
      "main": [
        [
          {
            "node": "Edit Dialog2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser6": {
      "ai_outputParser": [
        [
          {
            "node": "Detect Dialogue vs Monologue3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Sending a message about the start of work1": {
      "main": [
        [
          {
            "node": "YouTube Video Info1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcription1": {
      "main": [
        [
          {
            "node": "Send Transcription1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Transcription1": {
      "main": [
        [
          {
            "node": "Get Count1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete a chat message1": {
      "main": [
        [
          {
            "node": "Send an animated file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model11": {
      "ai_languageModel": [
        [
          {
            "node": "Edit Dialog2",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Structured Output Parser7": {
      "ai_outputParser": [
        [
          {
            "node": "Edit Dialog2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model12": {
      "ai_languageModel": [
        [
          {
            "node": "Detect Dialogue vs Monologue3",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "DeepSeek Chat Model7": {
      "ai_languageModel": [
        [
          {
            "node": "Edit Dialog2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate2": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "YouTube Video Info1": {
      "main": [
        [
          {
            "node": "YouTube Transcript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model13": {
      "ai_languageModel": [
        [
          {
            "node": "Transcript Editor2",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "DeepSeek Chat Model8": {
      "ai_languageModel": [
        [
          {
            "node": "Transcript Editor2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate3": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          },
          {
            "node": "Text Chunk Splitter5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text Chunk Splitter4": {
      "main": [
        [
          {
            "node": "Transcript Editor2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Transcript1": {
      "main": [
        [
          {
            "node": "Text Chunk Splitter4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcript Editor2": {
      "main": [
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Transcript Editor3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "If Monologue1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If Monologue1": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Text Chunk Splitter3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Text Chunk Splitter5": {
      "main": [
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "Detect Dialogue vs Monologue3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Transcription1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Count1": {
      "main": [
        [
          {
            "node": "Delete a chat message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Count1": {
      "main": [
        [
          {
            "node": "Update Count1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser8": {
      "ai_outputParser": [
        [
          {
            "node": "Transcript Editor2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Transcript Editor3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model9": {
      "ai_languageModel": [
        [
          {
            "node": "Transcript Editor3",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Transcript Editor3": {
      "main": [
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser9": {
      "ai_outputParser": [
        [
          {
            "node": "Transcript Editor3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model10": {
      "ai_languageModel": [
        [
          {
            "node": "Detect Dialogue vs Monologue2",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Detect Dialogue vs Monologue2": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser10": {
      "ai_outputParser": [
        [
          {
            "node": "Detect Dialogue vs Monologue2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model14": {
      "ai_languageModel": [
        [
          {
            "node": "Detect Dialogue vs Monologue2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Edit Dialog3": {
      "main": [
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model15": {
      "ai_languageModel": [
        [
          {
            "node": "Edit Dialog3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser11": {
      "ai_outputParser": [
        [
          {
            "node": "Edit Dialog3",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model11": {
      "ai_languageModel": [
        [
          {
            "node": "Edit Dialog3",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Detect Dialogue vs Monologue3": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Detect Dialogue vs Monologue2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get a file": {
      "main": [
        [
          {
            "node": "Classifier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Classifier",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "Send an animated file3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Receipt Processor",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Invoice Processor",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Contract Processor",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Receipt Processor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser12": {
      "ai_outputParser": [
        [
          {
            "node": "Classifier",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser13": {
      "ai_outputParser": [
        [
          {
            "node": "Receipt Processor",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Invoice Processor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser14": {
      "ai_outputParser": [
        [
          {
            "node": "Invoice Processor",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Contract Processor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript5": {
      "main": [
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser16": {
      "ai_outputParser": [
        [
          {
            "node": "Contract Processor",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser16",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser14",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model9": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser13",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model15": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser12",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get largestPhoto": {
      "main": [
        [
          {
            "node": "Get a file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Classifier": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Receipt Processor": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Invoice Processor": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Contract Processor": {
      "main": [
        [
          {
            "node": "Code in JavaScript5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {
    "Telegram Trigger": [
      {
        "update_id": 65901235,
        "message": {
          "message_id": 492,
          "from": {
            "id": 7210143504,
            "is_bot": false,
            "first_name": "Vladimir",
            "username": "IT_777_VV",
            "language_code": "ru"
          },
          "chat": {
            "id": 7210143504,
            "first_name": "Vladimir",
            "username": "IT_777_VV",
            "type": "private"
          },
          "date": 1764600665,
          "text": "https://www.youtube.com/watch?v=FhKbP7xWaPA",
          "entities": [
            {
              "offset": 0,
              "length": 43,
              "type": "url"
            }
          ],
          "link_preview_options": {
            "url": "https://www.youtube.com/watch?v=FhKbP7xWaPA"
          }
        }
      }
    ]
  },
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "6493dbe0c3b5c27c71fc40be5e147c7d7c7ad1feaffec3297ffe8f9f4617da35"
  }
}
